"use strict";(self.webpackChunkclimsoft_app=self.webpackChunkclimsoft_app||[]).push([[545],{2545:(H,g,c)=>{c.r(g),c.d(g,{PhysicalFeatureModule:()=>L});var u=c(6019),v=c(4333),Z=c(1850),A=c(9791),l=c(9133),h=c(273),e=c(3668),d=c(4437),r=c(2606),p=c(8063),b=c(5154);function q(o,a){1&o&&(e.TgZ(0,"div"),e.O4$(),e._UZ(1,"svg",20),e._uU(2," Feature class is required."),e.qZA())}function y(o,a){if(1&o&&(e.TgZ(0,"div",18),e.YNc(1,q,3,0,"div",19),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.f.feature_class.errors.required)}}function x(o,a){1&o&&(e.TgZ(0,"div"),e.O4$(),e._UZ(1,"svg",20),e._uU(2," Description not selected."),e.qZA())}function S(o,a){if(1&o&&(e.TgZ(0,"div",18),e.YNc(1,x,3,0,"div",19),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.f.description.errors.required)}}function k(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",21),e.TgZ(1,"div",22),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.TgZ(4,"a",23),e.NdJ("click",function(){return e.CHM(t),e.oxw().resetStation()}),e.O4$(),e._UZ(5,"svg",24),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(3),e.Oqu(t.station.station_name)}}function w(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"app-station-selection",25),e.NdJ("onSelection",function(n){return e.CHM(t),e.oxw().onStationSelect(n)}),e.qZA()}}function N(o,a){1&o&&(e.TgZ(0,"div"),e.O4$(),e._UZ(1,"svg",20),e._uU(2," Element not selected."),e.qZA())}function J(o,a){if(1&o&&(e.TgZ(0,"div",18),e.YNc(1,N,3,0,"div",19),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.f.refers_to.errors.required)}}const _=function(o){return{"is-invalid":o}};let m=(()=>{class o{constructor(t){this.dialogRef=t,this.submitted=!1,this.onClose=new h.x}ngOnInit(){this.form=new l.cw({feature_class:new l.NI("",l.kI.required),description:new l.NI("",l.kI.required),refers_to:new l.NI("",l.kI.required)}),this.featureClass&&this.form.patchValue(this.featureClass)}get update(){return!!this.featureClass}get f(){return this.form.controls}onStationSelect(t){this.station=t,this.form.controls.refers_to.setValue(t.station_id)}resetStation(){this.station=void 0,this.form.controls.station.reset()}onSubmit(t){this.submitted=!0,!this.form.invalid&&(this.onClose.next(this.form.value),this.dialogRef.hide())}onCancel(){this.onClose.next(!1),this.dialogRef.hide()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.UZ))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-feature-class-form"]],inputs:{featureClass:"featureClass"},decls:34,vars:17,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],[1,"modal-body"],["cForm","","novalidate","",3,"formGroup","ngSubmit"],["xs","12"],[1,"mb-2"],["cLabel","","for","feature_class"],["id","feature_class","formControlName","feature_class","aria-label","default input","cFormControl","","placeholder","Feature Class",3,"ngClass"],["col","12","class","invalid-feedback",4,"ngIf"],["cLabel","","for","description"],["id","description","formControlName","description","aria-label","default input","cFormControl","","placeholder","Description","rows","3",3,"ngClass"],["cLabel","","for","refers_to"],["id","refers_to","type","hidden","formControlName","refers_to","aria-label","default input","cFormControl","","placeholder","Refers To",3,"ngClass"],["class","typeahead-selection theme form-group",4,"ngIf"],[3,"onSelection",4,"ngIf"],["xs","12",1,"text-end","pt-3"],["type","submit",1,"btn","btn-dark","mx-1"],["type","button",1,"btn","btn-dark",3,"click"],["col","12",1,"invalid-feedback"],[4,"ngIf"],["cIcon","","name","cilXCircle"],[1,"typeahead-selection","theme","form-group"],[1,"typeahead-selection-inner"],[1,"btn",3,"click"],["cIcon","","name","cilX"],[3,"onSelection"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h5",1),e._uU(2),e.qZA(),e.qZA(),e.TgZ(3,"div",2),e.TgZ(4,"form",3),e.NdJ("ngSubmit",function(i){return s.onSubmit(i)}),e.TgZ(5,"c-row"),e.TgZ(6,"c-col",4),e.TgZ(7,"div",5),e.TgZ(8,"label",6),e._uU(9,"Feature Class"),e.qZA(),e._UZ(10,"input",7),e.YNc(11,y,2,1,"div",8),e.qZA(),e.qZA(),e.TgZ(12,"c-col",4),e.TgZ(13,"div",5),e.TgZ(14,"label",9),e._uU(15,"Description"),e.qZA(),e._UZ(16,"textarea",10),e.YNc(17,S,2,1,"div",8),e.qZA(),e.qZA(),e.TgZ(18,"c-col",4),e.TgZ(19,"div",5),e.TgZ(20,"label",11),e._uU(21,"Refers To"),e.qZA(),e._UZ(22,"input",12),e.YNc(23,k,6,1,"div",13),e.YNc(24,w,1,0,"app-station-selection",14),e.YNc(25,J,2,1,"div",8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"c-row"),e.TgZ(27,"c-col",4),e._UZ(28,"hr"),e.qZA(),e.TgZ(29,"c-col",15),e.TgZ(30,"button",16),e._uU(31),e.qZA(),e.TgZ(32,"button",17),e.NdJ("click",function(){return s.onCancel()}),e._uU(33,"Cancel"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.hij("",s.update?"Update":"Add"," Class"),e.xp6(2),e.Q6J("formGroup",s.form),e.xp6(6),e.Q6J("ngClass",e.VKq(11,_,(s.submitted||s.f.feature_class.touched)&&s.f.feature_class.invalid)),e.xp6(1),e.Q6J("ngIf",s.f.feature_class.errors),e.xp6(5),e.Q6J("ngClass",e.VKq(13,_,(s.submitted||s.f.description.touched)&&s.f.description.invalid)),e.xp6(1),e.Q6J("ngIf",s.f.description.errors),e.xp6(5),e.Q6J("ngClass",e.VKq(15,_,(s.submitted||s.f.refers_to.touched)&&s.f.refers_to.invalid)),e.xp6(1),e.Q6J("ngIf",s.station),e.xp6(1),e.Q6J("ngIf",!s.station),e.xp6(1),e.Q6J("ngIf",s.f.refers_to.errors),e.xp6(6),e.Oqu(s.update?"Update":"Add"))},directives:[l._Y,l.JL,r.$_X,l.sg,r.iok,r.Yp0,r.eFW,l.Fj,r.oHf,l.JJ,l.u,u.mk,u.O5,p.ar,b.n],styles:[""]}),o})();var C=c(461),T=c(3067),U=c(571);function I(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"th",11),e._uU(2),e.qZA(),e.TgZ(3,"td",5),e._uU(4),e.qZA(),e.TgZ(5,"td",5),e._uU(6),e.qZA(),e.TgZ(7,"td"),e.TgZ(8,"button",12),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw().edit(i)}),e.O4$(),e._UZ(9,"svg",13),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(2),e.Oqu(t.feature_class),e.xp6(2),e.Oqu(t.description),e.xp6(2),e.Oqu(t.refers_to)}}function P(o,a){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",14),e.TgZ(2,"c-alert",15),e._uU(3,"No physical feature classes available."),e.qZA(),e.qZA(),e.qZA())}let O=(()=>{class o{constructor(t,s,n){this.dialogRef=t,this.modalService=s,this.featureService=n,this.onClose=new h.x}ngOnInit(){this.loadClasses()}edit(t){this.onClose.next({type:"UPDATE_CLASS",class:t}),this.dialogRef.hide()}onNew(){this.modalService.show(m,{initialState:{},class:"modal-sm",backdrop:"static",keyboard:!1}).content.onClose.pipe((0,C.h)(n=>!!n),(0,T.w)(n=>this.featureService.addFeatureClass(n))).subscribe(()=>{this.loadClasses()})}updateFeatureClass(t){this.modalService.show(m,{initialState:{featureClass:t},class:"modal-sm",backdrop:"static",keyboard:!1}).content.onClose.pipe((0,C.h)(i=>!!i),(0,T.w)(i=>this.featureService.updateFeatureClass(i))).subscribe(()=>{this.loadClasses()})}onCancel(){this.onClose.next(!1),this.dialogRef.hide()}loadClasses(){this.classes$=this.featureService.getFeatureClasses()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.UZ),e.Y36(d.tT),e.Y36(U.q))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-feature-classes"]],decls:27,vars:6,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],[1,"modal-body"],["md","12"],["cTable",""],["scope","col"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-dark",3,"click"],["scope","row"],["cButton","","type","button","size","sm","color","light","shape","rounded-pill","cTooltip","Update Station",3,"click"],["cIcon","","name","cilPencil","size","sm"],["colspan","4"],["color","primary"]],template:function(t,s){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h5",1),e._uU(2,"Physical Feature Classes"),e.qZA(),e.qZA(),e.TgZ(3,"div",2),e.TgZ(4,"c-row"),e._UZ(5,"c-col",3),e.TgZ(6,"c-col",3),e.TgZ(7,"table",4),e.TgZ(8,"thead"),e.TgZ(9,"tr"),e.TgZ(10,"th",5),e._uU(11,"Feature Class"),e.qZA(),e.TgZ(12,"th",5),e._uU(13,"Description"),e.qZA(),e.TgZ(14,"th",5),e._uU(15,"Refers To"),e.qZA(),e._UZ(16,"th"),e.qZA(),e.qZA(),e.TgZ(17,"tbody"),e.YNc(18,I,10,3,"tr",6),e.ALo(19,"async"),e.YNc(20,P,4,0,"tr",7),e.ALo(21,"async"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"div",8),e.TgZ(23,"button",9),e.NdJ("click",function(){return s.onNew()}),e._uU(24,"New Class"),e.qZA(),e.TgZ(25,"button",10),e.NdJ("click",function(){return s.onCancel()}),e._uU(26,"Close"),e.qZA(),e.qZA()),2&t){let n;e.xp6(18),e.Q6J("ngForOf",e.lcZ(19,2,s.classes$)),e.xp6(2),e.Q6J("ngIf",!(null!=(n=e.lcZ(21,4,s.classes$))&&n.length))}},directives:[r.iok,r.Yp0,r.auY,u.sg,u.O5,r.Hq3,r.i9q,p.ar,r.wxo],pipes:[u.Ov],styles:[""]}),o})();var Y=c(2997),$=c(2719),F=c(2021),R=c(5261);function D(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e._uU(1,"\n            "),e.TgZ(2,"th",13),e._uU(3),e.qZA(),e._uU(4,"\n            "),e.TgZ(5,"td",10),e._uU(6),e.qZA(),e._uU(7,"\n            "),e.TgZ(8,"td",10),e._uU(9),e.qZA(),e._uU(10,"\n            "),e.TgZ(11,"td",10),e._uU(12),e.ALo(13,"date"),e.qZA(),e._uU(14,"\n            "),e.TgZ(15,"td",10),e._uU(16),e.ALo(17,"date"),e.qZA(),e._uU(18,"\n            "),e.TgZ(19,"td"),e._uU(20,"\n              "),e.TgZ(21,"button",14),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).view(i)}),e._uU(22,"\n                "),e.O4$(),e._UZ(23,"svg",15),e._uU(24,"\n              "),e.qZA(),e._uU(25,"\n              "),e.kcU(),e.TgZ(26,"button",16),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).update(i)}),e._uU(27,"\n                "),e.O4$(),e._UZ(28,"svg",17),e._uU(29,"\n              "),e.qZA(),e._uU(30,"\n              "),e.kcU(),e.TgZ(31,"button",18),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).remove(i)}),e._uU(32,"\n                "),e.O4$(),e._UZ(33,"svg",19),e._uU(34,"\n              "),e.qZA(),e._uU(35,"\n            "),e.qZA(),e._uU(36,"\n          "),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(3),e.Oqu(t.associated_with),e.xp6(3),e.Oqu(t.description),e.xp6(3),e.Oqu(t.classified_into),e.xp6(3),e.Oqu(e.lcZ(13,5,t.begin_date)),e.xp6(4),e.Oqu(e.lcZ(17,7,t.end_date))}}function Q(o,a){1&o&&(e.TgZ(0,"c-alert",20),e.TgZ(1,"strong"),e._uU(2,"Info"),e.qZA(),e._uU(3," No physical feature records available to show. "),e.qZA())}function M(o,a){if(1&o){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"c-card-body"),e._uU(1,"\n        "),e.TgZ(2,"app-paginator",8),e.NdJ("onPage",function(n){return e.CHM(t),e.oxw().onPage(n)}),e.qZA(),e._uU(3,"\n        "),e.TgZ(4,"table",9),e._uU(5,"\n          "),e.TgZ(6,"thead"),e._uU(7,"\n          "),e.TgZ(8,"tr"),e._uU(9,"\n            "),e.TgZ(10,"th",10),e._uU(11,"Station"),e.qZA(),e._uU(12,"\n            "),e.TgZ(13,"th",10),e._uU(14,"Description"),e.qZA(),e._uU(15,"\n            "),e.TgZ(16,"th",10),e._uU(17,"Classified Into"),e.qZA(),e._uU(18,"\n            "),e.TgZ(19,"th",10),e._uU(20,"Begin Date"),e.qZA(),e._uU(21,"\n            "),e.TgZ(22,"th",10),e._uU(23,"End Date"),e.qZA(),e._uU(24,"\n            "),e._UZ(25,"th"),e._uU(26,"\n          "),e.qZA(),e._uU(27,"\n          "),e.qZA(),e._uU(28,"\n          "),e.TgZ(29,"tbody"),e._uU(30,"\n          "),e.YNc(31,D,37,9,"tr",11),e._uU(32,"\n          "),e.qZA(),e._uU(33,"\n        "),e.qZA(),e._uU(34,"\n        "),e.YNc(35,Q,4,0,"c-alert",12),e._uU(36,"\n      "),e.qZA()}if(2&o){const t=a.$implicit,s=e.oxw();e.xp6(2),e.Q6J("limit",t.limit)("current",t.page)("pages",s.createPages(t.pages)),e.xp6(29),e.Q6J("ngForOf",t.features),e.xp6(4),e.Q6J("ngIf",!t.features.length)}}const z=[{path:"",component:(()=>{class o{constructor(t,s){this.modalService=t,this.physicalFeature=s,this.features$=(0,Y.of)({features:[],limit:1,page:1,pages:1})}ngOnInit(){this.features$=this.physicalFeature.features}onPage(t){console.log(t),this.physicalFeature.updateState(t)}createPages(t){return[...Array(t).keys()].map(s=>s+1)}add(){const s=this.modalService.show(F.G,{initialState:{feature:void 0},class:"modal-lg",backdrop:"static",keyboard:!1});s.content.onClose.subscribe(n=>{n&&this.physicalFeature.addFeature(n).subscribe(i=>{!i.success&&i.error?s.content.error=i.message:s.hide()})})}view(t){this.modalService.show(A.G,{initialState:{feature:t},class:"modal-xl"}).content.onClose.subscribe(i=>{i.action&&"UPDATE_FEATURE"===i.action&&this.update(t)})}update(t){this.modalService.show(F.G,{initialState:{feature:t},class:"modal-lg",backdrop:"static",keyboard:!1}).content.onClose.subscribe(i=>{i&&this.physicalFeature.updateFeature(t,i).subscribe()})}remove(t){this.modalService.show($.S,{initialState:{title:"Feature Removal",message:"Operation cannot be undone. Are you sure you want to remove the physical feature and its associated data?",confirm:"Go Ahead",cancel:"Cancel"}}).content.onClose.subscribe(i=>{i&&t&&this.physicalFeature.removeFeature(t)})}viewClasses(){this.modalService.show(O,{initialState:{},class:"modal-lg",backdrop:"static",keyboard:!1}).content.onClose.subscribe(n=>{})}addFeatureClass(){this.modalService.show(m,{initialState:{},class:"modal-md",backdrop:"static",keyboard:!1}).content.onClose.subscribe(n=>{})}updateFeatureClass(t){}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.tT),e.Y36(U.q))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-physical-features"]],decls:36,vars:3,consts:[["xs","12","lg","12","xl","12"],[1,"mb-4"],["xs","6"],[1,"col-6"],["xs","6",1,"text-end"],[1,"btn","btn-sm","cs-btn-sm","btn-outline",3,"click"],["cIcon","","name","cilPlus"],[4,"ngIf"],[3,"limit","current","pages","onPage"],["cTable",""],["scope","col"],[4,"ngFor","ngForOf"],["color","primary",4,"ngIf"],["scope","row"],["cButton","","size","sm","color","light","shape","rounded-pill","cTooltip","View Station",3,"click"],["cIcon","","name","cilArrowThickFromLeft","size","sm"],["cButton","","size","sm","color","light","shape","rounded-pill","cTooltip","Update Station",3,"click"],["cIcon","","name","cilPencil","size","sm"],["cButton","","size","sm","color","light","shape","rounded-pill","cTooltip","Remove Station",3,"click"],["cIcon","","name","cilTrash","size","sm",1,"text-danger"],["color","primary"]],template:function(t,s){1&t&&(e.TgZ(0,"c-row"),e._uU(1,"\n  "),e.TgZ(2,"c-col",0),e._uU(3,"\n    "),e.TgZ(4,"c-card",1),e._uU(5,"\n      "),e.TgZ(6,"c-card-header"),e._uU(7,"\n        "),e.TgZ(8,"c-row"),e._uU(9,"\n          "),e.TgZ(10,"c-col",2),e._uU(11,"\n            "),e.TgZ(12,"strong",3),e._uU(13,"Physical Features"),e.qZA(),e._uU(14,"\n          "),e.qZA(),e._uU(15,"\n          "),e.TgZ(16,"c-col",4),e._uU(17,"\n            "),e.TgZ(18,"a",5),e.NdJ("click",function(){return s.add()}),e._uU(19," "),e.O4$(),e._UZ(20,"svg",6),e._uU(21," Add New "),e.qZA(),e._uU(22,"\n            "),e.kcU(),e.TgZ(23,"a",5),e.NdJ("click",function(){return s.viewClasses()}),e._uU(24," "),e.O4$(),e._UZ(25,"svg",6),e._uU(26," Feature Classes "),e.qZA(),e._uU(27,"\n          "),e.qZA(),e._uU(28,"\n        "),e.qZA(),e._uU(29,"\n      "),e.qZA(),e._uU(30,"\n      "),e.YNc(31,M,37,5,"c-card-body",7),e.ALo(32,"async"),e._uU(33,"\n    "),e.qZA(),e._uU(34,"\n  "),e.qZA(),e._uU(35,"\n"),e.qZA()),2&t&&(e.xp6(31),e.Q6J("ngIf",e.lcZ(32,1,s.features$)))},directives:[r.iok,r.Yp0,r.AkF,r.nkx,p.ar,u.O5,r.yue,R.J,r.auY,u.sg,r.Hq3,r.i9q,r.wxo],pipes:[u.Ov,u.uU],styles:[""]}),o})(),data:{title:"Physical Features"}}];let E=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[Z.Bz.forChild(z)],Z.Bz]}),o})(),L=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[u.ez,E,v.m]]}),o})()}}]);