"use strict";(self.webpackChunkclimsoft_app=self.webpackChunkclimsoft_app||[]).push([[163],{7777:(N,w,_)=>{_.d(w,{C:()=>d});var s=_(3668);let d=(()=>{class y{constructor(){this.unSaved=!0}canDeactivate(c){return!c.canExit||c.canExit()}}return y.\u0275fac=function(c){return new(c||y)},y.\u0275prov=s.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})()},163:(N,w,_)=>{_.r(w),_.d(w,{DataEntryModule:()=>Eo});var s=_(6019),d=_(4333),y=_(1850),t=_(3668),c=_(2606);const C=function(o){return[o]};function D(o,l){if(1&o&&(t.TgZ(0,"c-nav-item",6),t._uU(1,"\n            "),t.TgZ(2,"a",7),t._uU(3),t.ALo(4,"uppercase"),t.qZA(),t._uU(5,"\n          "),t.qZA()),2&o){const e=l.$implicit,n=l.index;t.oxw();const i=t.MAs(14);t.Q6J("cTabContent",i)("tabPaneIdx",n),t.xp6(2),t.Q6J("routerLink",t.VKq(6,C,e.route)),t.xp6(1),t.hij(" ",t.lcZ(4,4,e.name),"")}}let A=(()=>{class o{constructor(e,n){this.router=e,this.route=n,this.tabs=[{name:"Hourly",route:"hourly",index:0},{name:"Hourly Wind",route:"hourly-wind",index:1},{name:"Daily",route:"daily",index:2},{name:"Monthly",route:"monthly",index:3},{name:"Synoptic 2",route:"synoptic",index:4},{name:"Agro",route:"agro",index:5}]}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(y.F0),t.Y36(y.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-data-entry-base"]],decls:28,vars:1,consts:[["xs","12"],[1,"mb-4"],["variant","tabs"],["aria-disabled","",3,"cTabContent","tabPaneIdx",4,"ngFor","ngForOf"],["dataEntryTabContent","cTabContent"],["xs","12","lg","12","xl","12","xxl","10",1,"p-4"],["aria-disabled","",3,"cTabContent","tabPaneIdx"],["cNavLink","","routerLinkActive","active",3,"routerLink"]],template:function(e,n){1&e&&(t.TgZ(0,"c-row"),t._uU(1,"\n  "),t.TgZ(2,"c-col",0),t._uU(3,"\n    "),t.TgZ(4,"c-card",1),t._uU(5,"\n      "),t.TgZ(6,"c-card-body"),t._uU(7,"\n        "),t.TgZ(8,"c-nav",2),t._uU(9,"\n          "),t.YNc(10,D,6,8,"c-nav-item",3),t._uU(11,"\n        "),t.qZA(),t._uU(12,"\n        "),t.TgZ(13,"c-tab-content",null,4),t._uU(15,"\n          "),t.TgZ(16,"c-row"),t._uU(17,"\n            "),t.TgZ(18,"c-col",5),t._uU(19,"\n              "),t._UZ(20,"router-outlet"),t._uU(21,"\n            "),t.qZA(),t._uU(22,"\n          "),t.qZA(),t._uU(23,"\n        "),t.qZA(),t._uU(24,"\n      "),t.qZA(),t._uU(25,"\n    "),t.qZA(),t._uU(26,"\n  "),t.qZA(),t._uU(27,"\n"),t.qZA()),2&e&&(t.xp6(10),t.Q6J("ngForOf",n.tabs))},directives:[c.iok,c.Yp0,c.AkF,c.yue,c.rZi,s.sg,c.C$2,y.lC,c.HOP,c.hL0,y.yS,c.Vh3,y.Od],pipes:[s.gd],styles:['.nav-item-link-after[_ngcontent-%COMP%], .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]:hover:after, .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%] > .nav-link.active[_ngcontent-%COMP%]:after{content:"";background-color:#458cff;height:2px;position:absolute;width:100%;left:0;bottom:-1px;transition:all .25s ease 0s;transform:scale(0)}.nav-tabs[_ngcontent-%COMP%]{border-bottom:2px solid #eaeaea}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{border:none;color:#141922;border-width:0}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]{border:none;color:#141922;position:relative}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%], .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]:hover{border:none;color:#141922!important}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%] > .nav-link.active[_ngcontent-%COMP%], .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%] > .nav-link.active[_ngcontent-%COMP%]:hover{border:none;color:#141922!important;font-weight:600;background-color:#fff}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:after, .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]:after, .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover:after{transform:scale(1)}']}),o})(),O=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-form-agro1"]],decls:7,vars:0,template:function(e,n){1&e&&(t.TgZ(0,"h5"),t._uU(1,"Agro Form Sample Content"),t.qZA(),t.TgZ(2,"p"),t._uU(3," This is some placeholder content the "),t.TgZ(4,"strong"),t._uU(5,"Home"),t.qZA(),t._uU(6," tab's associated content. Clicking another tab will toggle the visibility of this one for the next. The tab JavaScript swaps classes to control the content visibility and styling. You can use it with tabs, pills, and any other .nav-powered navigation.\n"),t.qZA())},styles:[""]}),o})();var m=_(2719),p=_(7384),g=_(461),h=_(4753),r=_(9133),b=_(2070),M=(()=>{return(o=M||(M={})).N="",o.M="M",o.T="T",o.E="E",o.G="G",o.D="D",M;var o})();const F=["N","M","T","E","G","D"],q={N:{label:"No Flag",class:"btn-empty"},M:{label:"Missing",class:"btn-missing"},T:{label:"Trace",class:"btn-trace"},E:{label:"Estimated",class:"btn-estimated"},G:{label:"Generated",class:"btn-generated"},D:{label:"Dubious",class:"btn-dubious"}};var f=_(4437),v=_(3834),Z=_(4499),T=_(453);const S="climsoft/v1";let U=(()=>{class o{constructor(e){this.http=e,this.hourlyState$=new Z.X(!1),this.dailyState$=new Z.X(!1),this.synopticState$=new Z.X(!1)}get dailyState(){return this.dailyState$.asObservable()}getDailyEntry(e,n,i,a,u){return this.updateDailyState({station:e,element:n,monthYear:`${a}-1-${i}`,hour:u}),this.http.GET(`${S}/form_daily2s?station_id=${e}&element_id=${n}&yyyy=${i}&mm=${a}&hh=${u}&limit=25&offset=0`)}addDailyEntry(e){return this.http.POST(`${S}/form_daily2s`,e)}updateDailyEntry(e,n,i,a,u,x){return this.http.PUT(`${S}/form_daily2s/${e}/${n}/${i}/${a}/${u}`,x)}updateDailyState(e){this.dailyState$.next(e)}resetDailyState(){this.dailyState$.next(!1)}getSynopticEntry(e,n,i,a,u){return this.synopticState$.next({station:e,year:n,month:i,day:a,hour:u}),this.http.GET(`${S}/synop-features?station_id=${e}&yy=${n}&mm=${i}&dd=${a}&hh=${u}`)}updateSynopticState(e,n,i,a,u){this.synopticState$.next({station:e,year:n,month:i,day:a,hour:u})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(T.O))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function tt(o,l){if(1&o&&(t.TgZ(0,"li"),t.TgZ(1,"div"),t._uU(2),t.qZA(),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.Gre("inner ",e.class,""),t.xp6(1),t.hij(" ",e.value||"Empty"," ")}}let $=(()=>{class o{constructor(){}ngOnInit(){console.log(q)}get flags(){return Object.keys(q).filter(e=>"N"!==e).map(e=>({key:e,value:q[e].label,class:q[e].class}))}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-flag-legend"]],decls:3,vars:1,consts:[[1,"flag-legend"],[4,"ngFor","ngForOf"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"ul"),t.YNc(2,tt,3,4,"li",1),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngForOf",n.flags))},directives:[s.sg],styles:[".flag-legend[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0}.flag-legend[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;display:inline-block}.flag-legend[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{font-size:.8rem;padding:.1rem .6rem .2rem;border:1px solid #2a3f4d;border-radius:1.5rem;line-height:.9rem;color:#fff}.flag-legend[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .inner.btn-empty[_ngcontent-%COMP%]{color:#4f5d73;background-color:#ecc9c9}.flag-legend[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .inner.btn-missing[_ngcontent-%COMP%]{color:#e60000;background-color:#ecc9c9}.flag-legend[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .inner.btn-trace[_ngcontent-%COMP%]{background-color:#4f5d73}.flag-legend[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .inner.btn-estimated[_ngcontent-%COMP%]{background-color:#39f}.flag-legend[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .inner.btn-generated[_ngcontent-%COMP%]{background-color:#9da5b1}.flag-legend[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .inner.btn-dubious[_ngcontent-%COMP%]{background-color:#f9b115}.flag-legend[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]{padding:.1rem}"]}),o})();var Q=_(8063),I=_(4859),L=_(5154);function et(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"li"),t.TgZ(1,"button",5),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().selectFlag(a)}),t._uU(2),t.qZA(),t.qZA()}if(2&o){const e=l.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngClass",n.flagConfig[e].class),t.xp6(1),t.hij(" ",e," ")}}const ot=function(o){return{enabled:o}},nt=function(o){return{disabled:o}};let G=(()=>{class o{constructor(e){this._eref=e,this.disabled=!1,this.onSelect=new t.vpe,this.flags=F,this.flagConfig=q,this.activeFlag="N",this.toggled=!1}onDocumentClick(e){e.stopPropagation(),this._eref.nativeElement.contains(e.target)||(this.toggled=!1)}ngOnInit(){}ngOnChanges(e){e.flag&&e.flag.currentValue&&(this.activeFlag=e.flag.currentValue)}toggleActive(){this.disabled||(this.toggled=!this.toggled)}selectFlag(e){this.activeFlag=e,this.toggled=!1,this.onSelect.emit(e)}get activeLabel(){return this.flagConfig[this.activeFlag].label}get filteredFlags(){return this.flags.filter(e=>"N"!==e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-flag-picker"]],hostBindings:function(e,n){1&e&&t.NdJ("click",function(a){return n.onDocumentClick(a)},!1,t.evT)},inputs:{flag:"flag",disabled:"disabled"},outputs:{onSelect:"onSelect"},features:[t.TTD],decls:8,vars:12,consts:[[1,"flag-picker",3,"ngClass"],[1,"inner"],[3,"cTooltip","ngClass","click"],["type","button",1,"btn","btn-circle","btn-light",3,"click"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-circle",3,"ngClass","click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"a",2),t.NdJ("click",function(){return n.toggleActive()}),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"ul"),t.TgZ(5,"li"),t.TgZ(6,"button",3),t.NdJ("click",function(){return n.selectFlag("N")}),t.qZA(),t.qZA(),t.YNc(7,et,3,2,"li",4),t.qZA(),t.qZA()),2&e&&(t.Q6J("ngClass",t.VKq(8,ot,n.toggled)),t.xp6(2),t.Gre("active-flag btn ",n.flagConfig[n.activeFlag].class,""),t.Q6J("cTooltip",n.activeLabel)("ngClass",t.VKq(10,nt,n.disabled)),t.xp6(1),t.hij(" ","N"===n.activeFlag?" ":n.activeFlag," "),t.xp6(4),t.Q6J("ngForOf",n.filteredFlags))},directives:[s.mk,c.i9q,s.sg],styles:[".flag-picker[_ngcontent-%COMP%]{position:relative;display:inline-block}.flag-picker[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:none;position:absolute;left:0;top:2.5rem;z-index:10;transition:all ease-in-out .3s;padding:.4rem .1rem;background-color:#edeefa;border:1px solid #cfd0dc;border-radius:1.5rem;box-shadow:#00000040 1px 1px 0 1px}.flag-picker[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;padding:.2rem}.flag-picker.enabled[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block}.flag-picker.enabled[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block}.flag-picker[_ngcontent-%COMP%]   .active-flag[_ngcontent-%COMP%]{display:inline-block;width:2.5rem;height:2.3rem;padding:.25rem .5rem;border-radius:.5rem;border:1px solid #034566;background-color:#ebedef;color:#fff;font-size:1.1rem;font-weight:600;cursor:pointer;text-decoration:none}.flag-picker[_ngcontent-%COMP%]   .active-flag.disabled[_ngcontent-%COMP%]{cursor:not-allowed}.flag-picker[_ngcontent-%COMP%]   .active-flag.btn-light[_ngcontent-%COMP%]{color:#33434b;background-color:#ecc9c9}.flag-picker[_ngcontent-%COMP%]   .active-flag.btn-missing[_ngcontent-%COMP%]{background-color:#ecc9c9;color:#e60000;padding:.3rem}.flag-picker[_ngcontent-%COMP%]   .active-flag.btn-trace[_ngcontent-%COMP%]{background-color:#4f5d73}.flag-picker[_ngcontent-%COMP%]   .active-flag.btn-estimated[_ngcontent-%COMP%]{color:#33434b;background-color:#9da5b1}.flag-picker[_ngcontent-%COMP%]   .active-flag.btn-generated[_ngcontent-%COMP%]{background-color:#39f}.flag-picker[_ngcontent-%COMP%]   .active-flag.btn-dubious[_ngcontent-%COMP%]{background-color:#f9b115}.btn-circle[_ngcontent-%COMP%]{width:2rem;height:2rem;padding:.3rem 0;border-radius:1.2rem;text-align:center;font-size:.9rem;font-weight:bold;line-height:.5rem}.btn-circle.btn-light[_ngcontent-%COMP%]{background-color:#ebedef;color:#4f5d73;border:1px solid #33434b}.btn-circle.btn-missing[_ngcontent-%COMP%]{color:#e60000;background-color:#ecc9c9;border:1px solid #e60000}.btn-circle.btn-trace[_ngcontent-%COMP%]{color:#ebedef;background-color:#4f5d73}.btn-circle.btn-estimated[_ngcontent-%COMP%]{color:#33434b;background-color:#9da5b1}.btn-circle.btn-generated[_ngcontent-%COMP%]{background-color:#39f}.btn-circle.btn-dubious[_ngcontent-%COMP%]{background-color:#f9b115}"]}),o})(),rt=(()=>{class o{constructor(){this.modified=!1,this.group=new r.cw({key:new r.NI(""),label:new r.NI(""),value:new r.NI(null,r.kI.required),flag:new r.NI(null)}),this.disabled=!1,this.onDirty=new t.vpe,this.onRevert=new t.vpe}ngOnInit(){this.group.valueChanges.pipe((0,g.h)(e=>!this.modified)).subscribe(e=>{this.onDirty.emit(!0)})}ngOnChanges(e){this.disabled?this.group.disable():this.group.enable()}selectFlag(e){this.group.controls.flag.setValue(e)}onBlur(e){this.pristine.value===this.fg.value.value&&this.fg.value.markAsPristine()}get fg(){return this.group.controls}get isDirty(){return this.fg.value.dirty||this.fg.flag.dirty||this.fg.period.dirty}get isInvalid(){return this.fg.value.dirty&&this.fg.value.value&&this.fg.flag.value===M.M}revert(){this.onRevert.emit(+this.fg.day.value)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-synoptic-form-group"]],inputs:{modified:"modified",group:"group",disabled:"disabled"},outputs:{onDirty:"onDirty",onRevert:"onRevert"},features:[t.TTD],decls:9,vars:4,consts:[[1,"synoptic-data-row",3,"formGroup"],["md","7",1,"py-2","label"],["md","3",1,"py-1"],["formControlName","value","aria-label","value","cFormControl",""],["md","2",1,"py-1","text-center"],["type","hidden","formControlName","flag","aria-label","flag","cFormControl",""],[3,"flag","disabled","onSelect"]],template:function(e,n){1&e&&(t.TgZ(0,"c-row",0),t.TgZ(1,"c-col",1),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"c-col",2),t._UZ(5,"input",3),t.qZA(),t.TgZ(6,"c-col",4),t._UZ(7,"input",5),t.TgZ(8,"app-flag-picker",6),t.NdJ("onSelect",function(a){return n.selectFlag(a)}),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",n.group),t.xp6(3),t.Oqu(n.fg.label.value),t.xp6(5),t.Q6J("flag",n.fg.flag.value)("disabled",n.disabled))},directives:[c.iok,r.JL,r.sg,c.Yp0,r.Fj,c.oHf,r.JJ,r.u,G],styles:[".synoptic-data-row[_ngcontent-%COMP%]{padding:.1rem .3rem;margin:.2rem 0;background-color:#e5ecf2;border:1px solid #cdd4da;border-radius:.2rem}.synoptic-data-row[_ngcontent-%COMP%]   c-col[_ngcontent-%COMP%]{padding:0 .2rem}.synoptic-data-row.has-error[_ngcontent-%COMP%]{background-color:#ffe2e2;border:1px solid #dd6868}.synoptic-data-row[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:disabled{cursor:not-allowed}"]}),o})();function it(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"div",31),t.TgZ(1,"div",32),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"a",33),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).resetStation()}),t.O4$(),t._UZ(5,"svg",34),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(3),t.Oqu(e.station.station_name)}}function lt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"app-station-selection",35),t.NdJ("onSelection",function(i){return t.CHM(e),t.oxw(2).onStationSelect(i)}),t.qZA()}}function at(o,l){1&o&&(t.TgZ(0,"div"),t.O4$(),t._UZ(1,"svg",38),t._uU(2," Station selection required."),t.qZA())}function ct(o,l){if(1&o&&(t.TgZ(0,"div",36),t.YNc(1,at,3,0,"div",37),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.station.errors.required)}}function st(o,l){1&o&&(t.TgZ(0,"div",39),t.O4$(),t._UZ(1,"svg",38),t._uU(2," Year and Month is required "),t.qZA())}function _t(o,l){if(1&o&&(t.TgZ(0,"option",40),t._uU(1),t.qZA()),2&o){const e=l.$implicit,n=t.oxw(2);t.Q6J("value",e),t.xp6(1),t.Oqu(n.getHoursValue(e))}}function mt(o,l){1&o&&(t.TgZ(0,"div"),t.O4$(),t._UZ(1,"svg",38),t._uU(2," Hour selection is required."),t.qZA())}function ut(o,l){if(1&o&&(t.TgZ(0,"div",36),t.YNc(1,mt,3,0,"div",37),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.hour.errors.required)}}function pt(o,l){if(1&o&&(t.TgZ(0,"c-col",44),t._UZ(1,"app-synoptic-form-group",45),t.qZA()),2&o){const e=l.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function dt(o,l){if(1&o&&(t.TgZ(0,"c-col",44),t._UZ(1,"app-synoptic-form-group",45),t.qZA()),2&o){const e=l.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function gt(o,l){if(1&o&&(t.TgZ(0,"c-col",44),t._UZ(1,"app-synoptic-form-group",45),t.qZA()),2&o){const e=l.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function ft(o,l){if(1&o&&(t.TgZ(0,"c-row",41),t.TgZ(1,"c-col",42),t.TgZ(2,"c-row"),t.YNc(3,pt,2,3,"c-col",43),t.ALo(4,"slice"),t.qZA(),t.qZA(),t.TgZ(5,"c-col",42),t.TgZ(6,"c-row"),t.YNc(7,dt,2,3,"c-col",43),t.ALo(8,"slice"),t.qZA(),t.qZA(),t.TgZ(9,"c-col",42),t.TgZ(10,"c-row"),t.YNc(11,gt,2,3,"c-col",43),t.ALo(12,"slice"),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(3),t.Q6J("ngForOf",t.Dn7(4,3,e.formGroups,0,12)),t.xp6(4),t.Q6J("ngForOf",t.Dn7(8,7,e.formGroups,12,24)),t.xp6(4),t.Q6J("ngForOf",t.Dn7(12,11,e.formGroups,24,33))}}function ht(o,l){1&o&&(t.TgZ(0,"c-alert",46),t._uU(1,"Please select a date to view form."),t.qZA())}function yt(o,l){1&o&&t._UZ(0,"c-spinner",47)}const B=function(o){return{"is-invalid":o}};function Zt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"form",1),t.NdJ("ngSubmit",function(i){return t.CHM(e),t.oxw().onSubmit(i)}),t.TgZ(1,"c-row"),t.TgZ(2,"c-col",2),t._UZ(3,"app-flag-legend"),t.qZA(),t.TgZ(4,"c-col",3),t.TgZ(5,"fieldset",4),t.TgZ(6,"legend"),t._uU(7,"Form Selector"),t.qZA(),t.TgZ(8,"c-row"),t.TgZ(9,"c-col",5),t.TgZ(10,"div",6),t.TgZ(11,"label",7),t._uU(12,"Station"),t.qZA(),t._UZ(13,"input",8),t.YNc(14,it,6,1,"div",9),t.YNc(15,lt,1,0,"app-station-selection",10),t.YNc(16,ct,2,1,"div",11),t.qZA(),t.qZA(),t.TgZ(17,"c-col",5),t.TgZ(18,"label",12),t._uU(19,"Year/Month/Day"),t.qZA(),t.TgZ(20,"c-input-group",13),t.TgZ(21,"span",14),t.O4$(),t._UZ(22,"svg",15),t.qZA(),t.kcU(),t._UZ(23,"input",16),t.TgZ(24,"input",17),t.NdJ("bsValueChange",function(i){return t.CHM(e),t.oxw().onDateSelection(i)}),t.qZA(),t.YNc(25,st,3,0,"div",18),t.qZA(),t.qZA(),t.TgZ(26,"c-col",5),t.TgZ(27,"div",6),t.TgZ(28,"label",19),t._uU(29,"Hour"),t.qZA(),t.TgZ(30,"select",20),t.TgZ(31,"option",21),t._uU(32,"Select Hour"),t.qZA(),t.YNc(33,_t,2,2,"option",22),t.qZA(),t.YNc(34,ut,2,1,"div",11),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"fieldset",4),t.TgZ(36,"legend"),t._uU(37," Carribiean Synoptic Data "),t.qZA(),t.YNc(38,ft,13,15,"c-row",23),t.YNc(39,ht,2,0,"c-alert",24),t.qZA(),t._UZ(40,"hr",25),t.TgZ(41,"c-row"),t.TgZ(42,"c-col",26),t.TgZ(43,"button",27),t.YNc(44,yt,1,0,"c-spinner",28),t._uU(45," Submit "),t.qZA(),t.TgZ(46,"button",29),t.NdJ("click",function(){return t.CHM(e),t.oxw().onReset()}),t._uU(47," Reset "),t.qZA(),t.TgZ(48,"button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCancel()}),t._uU(49," Cancel "),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(13),t.Q6J("ngClass",t.VKq(15,B,(e.submitted||e.f.station.touched)&&e.f.station.invalid)),t.xp6(1),t.Q6J("ngIf",e.station),t.xp6(1),t.Q6J("ngIf",!e.station),t.xp6(1),t.Q6J("ngIf",e.f.station.errors),t.xp6(8),t.Q6J("bsConfig",e.bsConfig)("bsValue",e.monthYearValue)("ngClass",t.VKq(17,B,e.submitted&&e.f.dayMonthYear.invalid)),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.f.dayMonthYear.invalid),t.xp6(5),t.Q6J("ngClass",t.VKq(19,B,(e.submitted||e.f.hour.touched)&&e.f.hour.invalid)),t.xp6(3),t.Q6J("ngForOf",e.hoursList),t.xp6(1),t.Q6J("ngIf",e.f.hour.errors),t.xp6(4),t.Q6J("ngIf",e.formGroups.length),t.xp6(1),t.Q6J("ngIf",!e.formGroups.length),t.xp6(5),t.Q6J("ngIf",e.loading)}}const W=[{key:"cloudHeight",label:"Height of Cloud"},{key:"visibility",label:"Visibility"},{key:"cloudCover",label:"Total Cloud Cover"},{key:"windDirection",label:"Wind Direction"},{key:"windSpeed",label:"Wind Speed"},{key:"dryBulb",label:"Dry Bulb"},{key:"wetBulb",label:"Wet Bulb"},{key:"dewPoint",label:"Dew Point"},{key:"relativeHum",label:"Relative Humidity"},{key:"stnLevelPress",label:"Station Level Pressure"},{key:"seaLevelPress",label:"Height of cloud"},{key:"rainFall",label:"Rain Fall"},{key:"presentWx",label:"Present WX"},{key:"pastWx1",label:"Past WX 1"},{key:"pastWx2",label:"Past WX 2"},{key:"nh",label:"Nh"},{key:"cl",label:"Cl"},{key:"cm",label:"Cm"},{key:"ch",label:"Ch"},{key:"tmin",label:"Temperature Min"},{key:"gmin",label:"G Min"},{key:"cldAmtLvl1",label:"Cloud Amt Level 1"},{key:"cldTpLvl1",label:"Cloud Type Level 1"},{key:"cldHtLvl1",label:"Cloud Height Level 1"},{key:"cldAmtLvl2",label:"Cloud Amt Level 2"},{key:"cldTpLvl2",label:"Cloud Type Level 2"},{key:"cldHtLvl2",label:"Cloud Height Level 2"},{key:"cldAmtLvl3",label:"Cloud Amt Level 3"},{key:"cldTpLvl3",label:"Cloud Type Level 3"},{key:"cldHtLvl3",label:"Cloud Height Level 3"},{key:"cldAmtLvl4",label:"Cloud Amt Level 4"},{key:"cldTpLvl4",label:"Cloud Type Level 4"},{key:"cldHtLvl4",label:"Cloud Height Level 4"}];let Ct=(()=>{class o{constructor(e,n,i){this.modalService=e,this.responsiveSvc=n,this.dataEntryService=i,this.submitted=!1,this.loading=!1,this.error="",this.monthModified=!1,this.hasRecord=!1,this.monthYearValue=new Date,this.bsConfig={isAnimated:!0,containerClass:"theme-blue",dateInputFormat:"DD/MM/YYYY"},this.hour=6,this.hoursList=[24,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]}ngOnInit(){this.initForm(),this.responsiveSvc.screenSize.subscribe(e=>{console.log(e)})}get f(){return this.form.controls}get isEditable(){return!!this.station}get isModified(){return this.monthModified}resetStation(){this.station=void 0,this.form.controls.station.reset()}onStationSelect(e){this.station=e,this.form.controls.station.setValue(e.station_id),this.loadSynopData()}onDateSelection(e){if(e){let n=b(e);this.year=n.year(),this.month=n.month()+1,this.day=n.date(),this.loadSynopData()}}getHoursValue(e){return b().set("hours",e).startOf("hour").format("HH:mm")}onReset(){this.form.reset(),this.initForm()}onCancel(){}onSubmit(e){this.submitted=!0}get groupArray(){return this.form.get("tags")}get formGroups(){return this.groupArray.controls}revertElement(e){this.modalService.show(m.S,{initialState:{title:"Confirm Revert",message:"Are you sure you want to revert to original values?",confirm:"Go Ahead",cancel:"Cancel"}}).content.onClose.subscribe(a=>{})}getTagGroup(e,n,i,a){return new r.cw({key:new r.NI(e),label:new r.NI(n),value:new r.NI(i),flag:new r.NI(a||M.M)})}initForm(){this.form=new r.cw({station:new r.NI(null,r.kI.required),dayMonthYear:new r.NI(new Date,r.kI.required),hour:new r.NI(6,[r.kI.min(0),r.kI.max(24)]),tags:new r.Oe([])});for(let e=0;e<W.length;e++)this.groupArray.push(this.getTagGroup(W[e].key,W[e].label,0))}loadSynopData(){console.log(this.station,this.year,this.month,this.day),this.station&&this.year&&this.month&&this.day&&this.hour&&this.dataEntryService.getSynopticEntry(this.station.station_id,this.year,this.month,this.day,this.hour).pipe((0,p.b)(e=>{this.hasRecord=e.result.length>0}),(0,g.h)(e=>e.result.length),(0,h.U)(e=>e.result[0])).subscribe(e=>{console.log(e),this.hasRecord=!0,this.patchForm(e)})}patchForm(e){this.formGroups.forEach((n,i)=>{const a=i+1<10?`0${i+1}`:i+1;n.patchValue(Object.assign({},{day:i+1,value:e[`day${a}`],flag:e[`flag${a}`]}))})}addRecord(){var e;let n={station_id:null===(e=this.station)||void 0===e?void 0:e.station_id,yyyy:this.year,mm:this.month,dd:this.day,hh:this.hour};this.formGroups.forEach((i,a)=>{const u=a+1<10?`0${a+1}`:a+1;n[`day${u}`]=i.controls.value.value,n[`flag${u}`]=i.controls.flag.value,n[`period${u}`]=i.controls.period.value}),n.entry_datetime=(new Date).toISOString(),n.temperature_units=this.f.temperature.value,n.precip_units=this.f.precip.value,n.cloud_height_units=this.f.cloud_height.value,n.vis_units=this.f.visibility.value,console.log(n)}updateRecord(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f.tT),t.Y36(v.k),t.Y36(U))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-form-synoptic2-caribbean"]],decls:4,vars:1,consts:[["novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],["novalidate","",3,"formGroup","ngSubmit"],["sm","12",1,"text-end"],["sm","12"],[1,"form-group","p-3","mt-2"],["xs","12","md","6","xl","3"],[1,"mb-2"],["cLabel","","for","station"],["id","station","type","hidden","formControlName","station","aria-label","default input","cFormControl","",3,"ngClass"],["class","typeahead-selection theme form-group",4,"ngIf"],[3,"onSelection",4,"ngIf"],["col","12","class","invalid-feedback",4,"ngIf"],["cLabel","","for","yymmdd"],[1,"mb-3"],["cInputGroupText","","id","basic-addon1"],["cIcon","","name","cilCalendar"],["id","yymmdd","type","hidden","formControlName","dayMonthYear","aria-label","default input","cFormControl","","placeholder","Select Date"],["name","dayMonthYear","placeholder","Select Year & Month","cFormControl","","bsDatepicker","","autocomplete","off",3,"bsConfig","bsValue","ngClass","bsValueChange"],["sm","12","class","invalid-feedback",4,"ngIf"],["cLabel","","for","hoursValue"],["formControlName","hour","aria-label","Hour","cSelect","",3,"ngClass"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formArrayName","tags",4,"ngIf"],["color","info","class","mt-4",4,"ngIf"],[1,"my-4"],["xs","12 py-4"],["type","submit","cButton","","color","dark",1,"px-3"],["aria-hidden","true","size","sm",4,"ngIf"],["type","button","cButton","","color","dark",1,"px-3","mx-1",3,"click"],["type","button","cButton","","color","dark",1,"px-3",3,"click"],[1,"typeahead-selection","theme","form-group"],[1,"typeahead-selection-inner"],[1,"btn",3,"click"],["cIcon","","name","cilX"],[3,"onSelection"],["col","12",1,"invalid-feedback"],[4,"ngIf"],["cIcon","","name","cilXCircle"],["sm","12",1,"invalid-feedback"],[3,"value"],["formArrayName","tags"],["md","12","lg","4"],["md","12",4,"ngFor","ngForOf"],["md","12"],[3,"disabled","modified","group"],["color","info",1,"mt-4"],["aria-hidden","true","size","sm"]],template:function(e,n){1&e&&(t.TgZ(0,"h5"),t._uU(1," Carribean Synoptic Data "),t.qZA(),t._UZ(2,"hr"),t.YNc(3,Zt,50,21,"form",0)),2&e&&(t.xp6(3),t.Q6J("ngIf",n.form))},directives:[s.O5,r._Y,r.JL,r.sg,c.iok,c.Yp0,$,c.eFW,r.Fj,c.oHf,r.JJ,r.u,s.mk,c.g8K,c.jOm,Q.ar,I.Y5,I.Np,r.EJ,c.nqR,r.YN,r.Kr,s.sg,c.Hq3,L.n,r.CE,rt,c.wxo,c.ORR],pipes:[s.OU],styles:[""]}),o})();function vt(o,l){if(1&o&&(t.TgZ(0,"option",5),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}let Tt=(()=>{class o{constructor(){this.disabled=!1,this.tabIndex=0,this.value=(new Date).getFullYear(),this.onSelect=new t.vpe,this.years=[]}ngOnInit(){this.formControl=new r.NI(this.value);const e=(new Date).getFullYear();for(let n=e;n>e-50;n--)this.years.push(n);this.subscription=this.formControl.valueChanges.subscribe(n=>{this.onSelect.emit(n)})}ngOnDestroy(){this.subscription.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-year-selector"]],inputs:{disabled:"disabled",tabIndex:"tabIndex",value:"value"},outputs:{onSelect:"onSelect"},decls:8,vars:3,consts:[["cLabel","","for","element"],[1,"mb-3"],["cSelect","","sizing","md",1,"mb-3",3,"value","formControl"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,n){1&e&&(t.ynx(0),t.TgZ(1,"label",0),t._uU(2,"Year"),t.qZA(),t.TgZ(3,"c-input-group",1),t.TgZ(4,"select",2),t.TgZ(5,"option",3),t._uU(6,"Select Year"),t.qZA(),t.YNc(7,vt,2,2,"option",4),t.qZA(),t.qZA(),t.BQk()),2&e&&(t.xp6(4),t.Q6J("value",n.value)("formControl",n.formControl),t.xp6(3),t.Q6J("ngForOf",n.years))},directives:[c.eFW,c.g8K,c.nqR,r.EJ,r.JJ,r.oH,r.YN,r.Kr,s.sg],styles:[""]}),o})();var K=_(6566);let bt=(()=>{class o{constructor(){this.modified=!1,this.group=new r.cw({month:new r.NI(""),value:new r.NI(null,r.kI.required),flag:new r.NI(null),priod:new r.NI("")}),this.disabled=!1,this.onDirty=new t.vpe}ngOnInit(){this.group.valueChanges.pipe((0,g.h)(e=>!this.modified)).subscribe(e=>{console.log(e),this.onDirty.emit(!0)})}ngOnChanges(e){this.disabled?this.group.disable():this.group.enable()}selectFlag(e){this.group.controls.flag.setValue(e)}get fg(){return this.group.controls}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-month-form-group"]],inputs:{modified:"modified",group:"group",disabled:"disabled"},outputs:{onDirty:"onDirty"},features:[t.TTD],decls:12,vars:4,consts:[[1,"monthly-data-row",3,"formGroup"],["md","5",1,"py-2","label"],["md","2",1,"py-1"],["formControlName","value","aria-label","value","cFormControl",""],["md","2",1,"py-1","text-center"],["type","hidden","formControlName","flag","aria-label","flag","cFormControl",""],[3,"flag","disabled","onSelect"],["md","3",1,"py-1","text-center"],["type","hidden","formControlName","period","aria-label","flag","cFormControl",""],["formControlName","period","aria-label","period","cFormControl",""]],template:function(e,n){1&e&&(t.TgZ(0,"c-row",0),t.TgZ(1,"c-col",1),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"c-col",2),t._UZ(5,"input",3),t.qZA(),t.TgZ(6,"c-col",4),t._UZ(7,"input",5),t.TgZ(8,"app-flag-picker",6),t.NdJ("onSelect",function(a){return n.selectFlag(a)}),t.qZA(),t.qZA(),t.TgZ(9,"c-col",7),t._UZ(10,"input",8),t._UZ(11,"input",9),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",n.group),t.xp6(3),t.Oqu(n.fg.month.value),t.xp6(5),t.Q6J("flag",n.fg.flag.value)("disabled",n.disabled))},directives:[c.iok,r.JL,r.sg,c.Yp0,r.Fj,c.oHf,r.JJ,r.u,G],styles:[".monthly-data-row[_ngcontent-%COMP%]{padding:.1rem .3rem;margin:.2rem 0;background-color:#e5ecf2;border:1px solid #cdd4da;border-radius:.2rem}.monthly-data-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{text-align:left}.monthly-data-row[_ngcontent-%COMP%]   c-col[_ngcontent-%COMP%]{padding:0 .2rem}.monthly-data-row.has-error[_ngcontent-%COMP%]{background-color:#ffe2e2;border:1px solid #dd6868}.monthly-data-row[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:disabled{cursor:not-allowed}"]}),o})();function xt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"div",24),t.TgZ(1,"div",25),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"a",26),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).resetStation()}),t.O4$(),t._UZ(5,"svg",27),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(3),t.Oqu(e.station.station_name)}}function At(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"app-station-selection",28),t.NdJ("onSelection",function(i){return t.CHM(e),t.oxw(2).onStationSelect(i)}),t.qZA()}}function Mt(o,l){1&o&&(t.TgZ(0,"div"),t.O4$(),t._UZ(1,"svg",30),t._uU(2," Station selection required."),t.qZA())}function Ft(o,l){if(1&o&&(t.TgZ(0,"div",29),t.YNc(1,Mt,3,0,"div",15),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.station.errors.required)}}function wt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"div",24),t.TgZ(1,"div",25),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"a",26),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).resetElement()}),t.O4$(),t._UZ(5,"svg",27),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(3),t.Oqu(e.element.element_name)}}function qt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"app-element-selection",28),t.NdJ("onSelection",function(i){return t.CHM(e),t.oxw(2).onElementSelect(i)}),t.qZA()}}function Ot(o,l){1&o&&(t.TgZ(0,"div"),t.O4$(),t._UZ(1,"svg",30),t._uU(2," Element selection is required."),t.qZA())}function Dt(o,l){if(1&o&&(t.TgZ(0,"div",29),t.YNc(1,Ot,3,0,"div",15),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.element.errors.required)}}function St(o,l){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij("for ",e.getDateText(),"")}}function Ut(o,l){if(1&o&&(t.TgZ(0,"p"),t._uU(1," Values must be between "),t.TgZ(2,"strong"),t._uU(3),t.ALo(4,"number"),t.qZA(),t._uU(5," and "),t.TgZ(6,"strong"),t._uU(7),t.ALo(8,"number"),t.qZA(),t.qZA()),2&o){const e=t.oxw(3);t.xp6(3),t.hij(" ",t.lcZ(4,2,e.element.lower_limit)," "),t.xp6(4),t.hij("",t.lcZ(8,4,e.element.upper_limit)," ")}}function It(o,l){1&o&&t._UZ(0,"p")}function Et(o,l){if(1&o&&(t.TgZ(0,"c-row"),t.TgZ(1,"c-col",31),t.TgZ(2,"div",32),t._UZ(3,"img",33),t.TgZ(4,"h5"),t._uU(5,"Please use the following information for data entry"),t.qZA(),t.YNc(6,Ut,9,6,"p",15),t.YNc(7,It,1,0,"p",15),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(6),t.Q6J("ngIf",e.element.lower_limit&&e.element.upper_limit),t.xp6(1),t.Q6J("ngIf",!e.element.lower_limit||!e.element.upper_limit)}}function Pt(o,l){1&o&&(t.TgZ(0,"c-row",34),t.TgZ(1,"c-col",35),t.TgZ(2,"c-row",36),t.TgZ(3,"c-col",37),t._uU(4,"Month"),t.qZA(),t.TgZ(5,"c-col",38),t._uU(6,"Value"),t.qZA(),t.TgZ(7,"c-col",38),t._uU(8,"Flag"),t.qZA(),t.TgZ(9,"c-col",39),t._uU(10,"Period"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"c-col",40),t.TgZ(12,"c-row",36),t.TgZ(13,"c-col",37),t._uU(14,"Month"),t.qZA(),t.TgZ(15,"c-col",38),t._uU(16,"Value"),t.qZA(),t.TgZ(17,"c-col",38),t._uU(18,"Flag"),t.qZA(),t.TgZ(19,"c-col",39),t._uU(20,"Period"),t.qZA(),t.qZA(),t.qZA(),t.qZA())}function Nt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"c-col",42),t.TgZ(1,"app-month-form-group",43),t.NdJ("onDirty",function(i){return t.CHM(e),t.oxw(3).onFormModified(i)}),t.qZA(),t.qZA()}if(2&o){const e=l.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function kt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"c-col",42),t.TgZ(1,"app-month-form-group",43),t.NdJ("onDirty",function(i){return t.CHM(e),t.oxw(3).onFormModified(i)}),t.qZA(),t.qZA()}if(2&o){const e=l.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function Jt(o,l){if(1&o&&(t.TgZ(0,"c-row",34),t.TgZ(1,"c-col",35),t.TgZ(2,"c-row"),t.YNc(3,Nt,2,3,"c-col",41),t.ALo(4,"slice"),t.qZA(),t.qZA(),t.TgZ(5,"c-col",35),t.TgZ(6,"c-row"),t.YNc(7,kt,2,3,"c-col",41),t.ALo(8,"slice"),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(3),t.Q6J("ngForOf",t.Dn7(4,2,e.formMonthGroups,0,6)),t.xp6(4),t.Q6J("ngForOf",t.Dn7(8,6,e.formMonthGroups,6,12))}}function Ht(o,l){1&o&&(t.TgZ(0,"c-alert",44),t._uU(1,"Please select a date to view form."),t.qZA())}function Yt(o,l){1&o&&t._UZ(0,"c-spinner",45)}const z=function(o){return{"is-invalid":o}};function $t(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"form",1),t.NdJ("ngSubmit",function(i){return t.CHM(e),t.oxw().onSubmit(i)}),t.TgZ(1,"c-row"),t.TgZ(2,"c-col",2),t._UZ(3,"app-flag-legend"),t.qZA(),t.TgZ(4,"c-col",3),t.TgZ(5,"fieldset",4),t.TgZ(6,"legend"),t._uU(7,"Form Selector"),t.qZA(),t.TgZ(8,"c-row"),t.TgZ(9,"c-col",5),t.TgZ(10,"div",6),t.TgZ(11,"label",7),t._uU(12,"Station"),t.qZA(),t._UZ(13,"input",8),t.YNc(14,xt,6,1,"div",9),t.YNc(15,At,1,0,"app-station-selection",10),t.YNc(16,Ft,2,1,"div",11),t.qZA(),t.qZA(),t.TgZ(17,"c-col",5),t.TgZ(18,"div",6),t.TgZ(19,"label",12),t._uU(20,"Element"),t.qZA(),t._UZ(21,"input",13),t.YNc(22,wt,6,1,"div",9),t.YNc(23,qt,1,0,"app-element-selection",10),t.YNc(24,Dt,2,1,"div",11),t.qZA(),t.qZA(),t.TgZ(25,"c-col",5),t.TgZ(26,"app-year-selector",14),t.NdJ("onSelect",function(i){return t.CHM(e),t.oxw().yearSelect(i)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"fieldset",4),t.TgZ(28,"legend"),t._uU(29,"Monthly Data "),t.YNc(30,St,2,1,"span",15),t.qZA(),t.YNc(31,Et,8,2,"c-row",15),t.YNc(32,Pt,21,0,"c-row",16),t.YNc(33,Jt,9,10,"c-row",16),t.YNc(34,Ht,2,0,"c-alert",17),t.qZA(),t._UZ(35,"hr",18),t.TgZ(36,"c-row"),t.TgZ(37,"c-col",19),t.TgZ(38,"button",20),t.YNc(39,Yt,1,0,"c-spinner",21),t._uU(40," Submit "),t.qZA(),t.TgZ(41,"button",22),t.NdJ("click",function(){return t.CHM(e),t.oxw().onReset()}),t._uU(42," Reset "),t.qZA(),t.TgZ(43,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCancel()}),t._uU(44," Cancel "),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(13),t.Q6J("ngClass",t.VKq(16,z,(e.submitted||e.f.station.touched)&&e.f.station.invalid)),t.xp6(1),t.Q6J("ngIf",e.station),t.xp6(1),t.Q6J("ngIf",!e.station),t.xp6(1),t.Q6J("ngIf",e.f.station.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(18,z,(e.submitted||e.f.element.touched)&&e.f.element.invalid)),t.xp6(1),t.Q6J("ngIf",e.element),t.xp6(1),t.Q6J("ngIf",!e.element),t.xp6(1),t.Q6J("ngIf",e.f.element.errors),t.xp6(2),t.Q6J("value",e.yearValue),t.xp6(4),t.Q6J("ngIf",e.date),t.xp6(1),t.Q6J("ngIf",e.element&&e.formMonthGroups.length),t.xp6(1),t.Q6J("ngIf",e.formMonthGroups.length),t.xp6(1),t.Q6J("ngIf",e.formMonthGroups.length),t.xp6(1),t.Q6J("ngIf",!e.formMonthGroups.length),t.xp6(5),t.Q6J("ngIf",e.loading)}}let Qt=(()=>{class o{constructor(e){this.responsiveSvc=e,this.submitted=!1,this.loading=!1,this.error="",this.monthModified=!1,this.yearValue=(new Date).getFullYear(),this.bsConfig={isAnimated:!0,containerClass:"theme-blue",dateInputFormat:"YYYY"},this.monthsList=[1,2,3,4,5,6,7,8,9,10,11,12]}ngOnInit(){this.initForm(),this.responsiveSvc.screenSize.subscribe(e=>{console.log(e)}),this.renderFormMonths(this.yearValue)}get f(){return this.form.controls}get isEditable(){return!!this.station&&!!this.element}get isModified(){return this.monthModified}onFormModified(e){this.monthModified=e}resetStation(){this.station=void 0,this.form.controls.station.reset()}onStationSelect(e){this.station=e,this.form.controls.station.setValue(e.station_id)}resetElement(){this.element=void 0,this.form.controls.element.reset()}onElementSelect(e){this.element=e,this.form.controls.element.setValue(e.element_id)}onSubmit(e){this.submitted=!0;const n=this.form.value;return n.hours=this.formMonthGroups.map(i=>i.value),console.log(n),!0}yearSelect(e){this.renderFormMonths(e)}onReset(){this.form.reset(),this.initForm()}onCancel(){}getDateText(){return b(this.date).format("YYYY")}get monthsArray(){return this.form.get("months")}get formMonthGroups(){return this.monthsArray.controls}getMonthGroup(e){const n=new r.cw({month:new r.NI(null),value:new r.NI(null,[r.kI.min(0),r.kI.max(70)]),flag:new r.NI(null),period:new r.NI(null)});return e&&n.patchValue(e),n}renderFormMonths(e){const i=b(`${e}`).year();this.resetMonths();for(let a=0;a<=this.monthsList.length;a++){const u=b(`${i}-${this.monthsList[a]}`,"YYYY-MM").daysInMonth(),x=b(`${i}-${this.monthsList[a]}`,"YYYY-MM").format("MMMM");this.monthsArray.push(this.getMonthGroup({month:x,value:0,flag:M.M,period:u}))}}resetMonths(){this.form.controls.months=new r.Oe([])}initForm(){this.form=new r.cw({station:new r.NI(null,r.kI.required),element:new r.NI(null,r.kI.required),year:new r.NI((new Date).getFullYear(),r.kI.required),months:new r.Oe([])})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(v.k))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-form-monthly"]],decls:4,vars:1,consts:[["novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],["novalidate","",3,"formGroup","ngSubmit"],["sm","12",1,"text-end"],["sm","12"],[1,"form-group","p-3","mt-4"],["xs","12","md","6","xl","3"],[1,"mb-2"],["cLabel","","for","station"],["id","station","type","hidden","formControlName","station","aria-label","default input","cFormControl","",3,"ngClass"],["class","typeahead-selection theme form-group",4,"ngIf"],[3,"onSelection",4,"ngIf"],["col","12","class","invalid-feedback",4,"ngIf"],["cLabel","","for","element"],["id","element","type","hidden","formControlName","element","aria-label","default input","cFormControl","",3,"ngClass"],[3,"value","onSelect"],[4,"ngIf"],["formArrayName","months",4,"ngIf"],["color","info","class","mt-4",4,"ngIf"],[1,"my-4"],["xs","12 py-4"],["type","submit","cButton","","color","dark",1,"px-3"],["aria-hidden","true","size","sm",4,"ngIf"],["type","button","cButton","","color","dark",1,"px-3","mx-1",3,"click"],["type","button","cButton","","color","dark",1,"px-3",3,"click"],[1,"typeahead-selection","theme","form-group"],[1,"typeahead-selection-inner"],[1,"btn",3,"click"],["cIcon","","name","cilX"],[3,"onSelection"],["col","12",1,"invalid-feedback"],["cIcon","","name","cilXCircle"],["md","12 mt-3 mb-3"],[1,"form-info"],["src","./assets/img/icons/info.png","alt",""],["formArrayName","months"],["sm","12","md","6","lg","5"],[1,"hourly-header"],["md","5",1,"py-1"],["md","2",1,"py-1"],["md","3",1,"py-1"],["sm","12","md","6","lg","5",1,"d-none","d-lg-block"],["md","12",4,"ngFor","ngForOf"],["md","12"],[3,"disabled","modified","group","onDirty"],["color","info",1,"mt-4"],["aria-hidden","true","size","sm"]],template:function(e,n){1&e&&(t.TgZ(0,"h5"),t._uU(1," Monthly data for selected year "),t.qZA(),t._UZ(2,"hr"),t.YNc(3,$t,45,20,"form",0)),2&e&&(t.xp6(3),t.Q6J("ngIf",n.form))},directives:[s.O5,r._Y,r.JL,r.sg,c.iok,c.Yp0,$,c.eFW,r.Fj,c.oHf,r.JJ,r.u,s.mk,Tt,c.Hq3,Q.ar,L.n,K.Y,r.CE,s.sg,bt,c.wxo,c.ORR],pipes:[s.JJ,s.OU],styles:[""]}),o})(),Lt=(()=>{class o{constructor(){this.modified=!1,this.group=new r.cw({hour:new r.NI(1),ddff:new r.NI(null,r.kI.required),dd:new r.NI(null,r.kI.required),ff:new r.NI(null,r.kI.required),flag:new r.NI(null)}),this.disabled=!1,this.onDirty=new t.vpe}ngOnInit(){this.group.valueChanges.pipe((0,g.h)(e=>!this.modified)).subscribe(e=>{console.log(e),this.onDirty.emit(!0)})}ngOnChanges(e){this.disabled?this.group.disable():this.group.enable()}get fg(){return this.group.controls}hourVal(e){return e?e&&e<10?`0${e}`:`${e}`:"00"}selectFlag(e){this.group.controls.flag.setValue(e)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-hourly-wind-form-group"]],inputs:{modified:"modified",group:"group",disabled:"disabled"},outputs:{onDirty:"onDirty"},features:[t.TTD],decls:13,vars:4,consts:[[1,"hourly-data-row",3,"formGroup"],[1,"py-2","label"],[1,"py-1"],["formControlName","ddff","aria-label","ddff","cFormControl",""],["formControlName","dd","aria-label","dd","cFormControl",""],["formControlName","ff","aria-label","ff","cFormControl",""],[1,"py-1","text-center"],["type","hidden","formControlName","flag","aria-label","flag","cFormControl",""],[3,"flag","disabled","onSelect"]],template:function(e,n){1&e&&(t.TgZ(0,"c-row",0),t.TgZ(1,"c-col",1),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"c-col",2),t._UZ(5,"input",3),t.qZA(),t.TgZ(6,"c-col",2),t._UZ(7,"input",4),t.qZA(),t.TgZ(8,"c-col",2),t._UZ(9,"input",5),t.qZA(),t.TgZ(10,"c-col",6),t._UZ(11,"input",7),t.TgZ(12,"app-flag-picker",8),t.NdJ("onSelect",function(a){return n.selectFlag(a)}),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",n.group),t.xp6(3),t.Oqu(n.hourVal(n.fg.hour.value)),t.xp6(9),t.Q6J("flag",n.fg.flag.value)("disabled",n.disabled))},directives:[c.iok,r.JL,r.sg,c.Yp0,r.Fj,c.oHf,r.JJ,r.u,G],styles:[".hourly-data-row[_ngcontent-%COMP%]{padding:.1rem .3rem;margin:.2rem 0;background-color:#e5ecf2;border:1px solid #cdd4da;border-radius:.2rem}.hourly-data-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{text-align:center}.hourly-data-row[_ngcontent-%COMP%]   c-col[_ngcontent-%COMP%]{padding:0 .2rem}.hourly-data-row.has-error[_ngcontent-%COMP%]{background-color:#ffe2e2;border:1px solid #dd6868}.hourly-data-row[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:disabled{cursor:not-allowed}"]}),o})();function Gt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"div",29),t.TgZ(1,"div",30),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"a",31),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).resetStation()}),t.O4$(),t._UZ(5,"svg",32),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(3),t.Oqu(e.station.station_name)}}function Vt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"app-station-selection",33),t.NdJ("onSelection",function(i){return t.CHM(e),t.oxw(2).onStationSelect(i)}),t.qZA()}}function Rt(o,l){1&o&&(t.TgZ(0,"div"),t.O4$(),t._UZ(1,"svg",35),t._uU(2," Station selection required."),t.qZA())}function Bt(o,l){if(1&o&&(t.TgZ(0,"div",34),t.YNc(1,Rt,3,0,"div",20),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.station.errors.required)}}function Wt(o,l){1&o&&(t.TgZ(0,"div",36),t.O4$(),t._UZ(1,"svg",35),t._uU(2," Year and Month is required "),t.qZA())}function Kt(o,l){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij("for ",e.getDateText(),"")}}function jt(o,l){1&o&&(t.TgZ(0,"c-row",37),t.TgZ(1,"c-col",38),t.TgZ(2,"c-row",39),t.TgZ(3,"c-col",40),t._uU(4,"Hour"),t.qZA(),t.TgZ(5,"c-col",40),t._uU(6,"DDFF"),t.qZA(),t.TgZ(7,"c-col",40),t._uU(8,"DD"),t.qZA(),t.TgZ(9,"c-col",40),t._uU(10,"FF"),t.qZA(),t.TgZ(11,"c-col",40),t._uU(12,"Flag"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"c-col",41),t.TgZ(14,"c-row",39),t.TgZ(15,"c-col",40),t._uU(16,"Hour"),t.qZA(),t.TgZ(17,"c-col",40),t._uU(18,"DDFF"),t.qZA(),t.TgZ(19,"c-col",40),t._uU(20,"DD"),t.qZA(),t.TgZ(21,"c-col",40),t._uU(22,"FF"),t.qZA(),t.TgZ(23,"c-col",40),t._uU(24,"Flag"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"c-col",42),t.TgZ(26,"c-row",39),t.TgZ(27,"c-col",40),t._uU(28,"Hour"),t.qZA(),t.TgZ(29,"c-col",40),t._uU(30,"DDFF"),t.qZA(),t.TgZ(31,"c-col",40),t._uU(32,"DD"),t.qZA(),t.TgZ(33,"c-col",40),t._uU(34,"FF"),t.qZA(),t.TgZ(35,"c-col",40),t._uU(36,"Flag"),t.qZA(),t.qZA(),t.qZA(),t.qZA())}function zt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"c-col",44),t.TgZ(1,"app-hourly-wind-form-group",45),t.NdJ("onDirty",function(i){return t.CHM(e),t.oxw(3).onFormModified(i)}),t.qZA(),t.qZA()}if(2&o){const e=l.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function Xt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"c-col",44),t.TgZ(1,"app-hourly-wind-form-group",45),t.NdJ("onDirty",function(i){return t.CHM(e),t.oxw(3).onFormModified(i)}),t.qZA(),t.qZA()}if(2&o){const e=l.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function te(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"c-col",44),t.TgZ(1,"app-hourly-wind-form-group",45),t.NdJ("onDirty",function(i){return t.CHM(e),t.oxw(3).onFormModified(i)}),t.qZA(),t.qZA()}if(2&o){const e=l.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function ee(o,l){if(1&o&&(t.TgZ(0,"c-row",37),t.TgZ(1,"c-col",38),t.TgZ(2,"c-row"),t.YNc(3,zt,2,3,"c-col",43),t.ALo(4,"slice"),t.qZA(),t.qZA(),t.TgZ(5,"c-col",38),t.TgZ(6,"c-row"),t.YNc(7,Xt,2,3,"c-col",43),t.ALo(8,"slice"),t.qZA(),t.qZA(),t.TgZ(9,"c-col",38),t.TgZ(10,"c-row"),t.YNc(11,te,2,3,"c-col",43),t.ALo(12,"slice"),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(3),t.Q6J("ngForOf",t.Dn7(4,3,e.formHoursGroups,0,8)),t.xp6(4),t.Q6J("ngForOf",t.Dn7(8,7,e.formHoursGroups,8,16)),t.xp6(4),t.Q6J("ngForOf",t.Dn7(12,11,e.formHoursGroups,16,24))}}function oe(o,l){1&o&&(t.TgZ(0,"c-alert",46),t._uU(1,"Please select a date to view form."),t.qZA())}function ne(o,l){1&o&&t._UZ(0,"c-spinner",47)}const X=function(o){return{"is-invalid":o}};function re(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"form",1),t.NdJ("ngSubmit",function(i){return t.CHM(e),t.oxw().onSubmit(i)}),t.TgZ(1,"c-row"),t.TgZ(2,"c-col",2),t._UZ(3,"app-flag-legend"),t.qZA(),t.TgZ(4,"c-col",3),t.TgZ(5,"fieldset",4),t.TgZ(6,"legend"),t._uU(7,"Form Selector"),t.qZA(),t.TgZ(8,"c-row"),t.TgZ(9,"c-col",5),t.TgZ(10,"div",6),t.TgZ(11,"label",7),t._uU(12,"Station"),t.qZA(),t._UZ(13,"input",8),t.YNc(14,Gt,6,1,"div",9),t.YNc(15,Vt,1,0,"app-station-selection",10),t.YNc(16,Bt,2,1,"div",11),t.qZA(),t.qZA(),t.TgZ(17,"c-col",5),t.TgZ(18,"label",12),t._uU(19,"Day/Month/Year"),t.qZA(),t.TgZ(20,"c-input-group",13),t.TgZ(21,"span",14),t.O4$(),t._UZ(22,"svg",15),t.qZA(),t.kcU(),t._UZ(23,"input",16),t.TgZ(24,"input",17),t.NdJ("bsValueChange",function(i){return t.CHM(e),t.oxw().onDateSelection(i)})("onShown",function(i){return t.CHM(e),t.oxw().onOpenCalendar(i)}),t.qZA(),t.YNc(25,Wt,3,0,"div",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"fieldset",19),t.TgZ(27,"legend"),t._uU(28,"Hourly Data "),t.YNc(29,Kt,2,1,"span",20),t.qZA(),t.YNc(30,jt,37,0,"c-row",21),t.YNc(31,ee,13,15,"c-row",21),t.YNc(32,oe,2,0,"c-alert",22),t.qZA(),t._UZ(33,"hr",23),t.TgZ(34,"c-row"),t.TgZ(35,"c-col",24),t.TgZ(36,"button",25),t.YNc(37,ne,1,0,"c-spinner",26),t._uU(38," Submit "),t.qZA(),t.TgZ(39,"button",27),t.NdJ("click",function(){return t.CHM(e),t.oxw().onReset()}),t._uU(40," Reset "),t.qZA(),t.TgZ(41,"button",28),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCancel()}),t._uU(42," Cancel "),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(13),t.Q6J("ngClass",t.VKq(14,X,(e.submitted||e.f.station.touched)&&e.f.station.invalid)),t.xp6(1),t.Q6J("ngIf",e.station),t.xp6(1),t.Q6J("ngIf",!e.station),t.xp6(1),t.Q6J("ngIf",e.f.station.errors),t.xp6(8),t.Q6J("bsConfig",e.bsConfig)("bsValue",e.monthYearValue)("ngClass",t.VKq(16,X,e.submitted&&e.f.monthYear.invalid)),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.f.monthYear.invalid),t.xp6(4),t.Q6J("ngIf",e.date),t.xp6(1),t.Q6J("ngIf",e.formHoursGroups.length),t.xp6(1),t.Q6J("ngIf",e.formHoursGroups.length),t.xp6(1),t.Q6J("ngIf",!e.formHoursGroups.length),t.xp6(5),t.Q6J("ngIf",e.loading)}}let ie=(()=>{class o{constructor(e){this.responsiveSvc=e,this.submitted=!1,this.loading=!1,this.error="",this.monthModified=!1,this.monthYearValue=new Date,this.bsConfig={isAnimated:!0,containerClass:"theme-blue",dateInputFormat:"DD/MM/YYYY"},this.hoursList=[24,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]}ngOnInit(){this.initForm(),this.responsiveSvc.screenSize.subscribe(e=>{console.log(e)})}get f(){return this.form.controls}get isEditable(){return!!this.station}get isModified(){return this.monthModified}onFormModified(e){this.monthModified=e}resetStation(){this.station=void 0,this.form.controls.station.reset()}onStationSelect(e){this.station=e,this.form.controls.station.setValue(e.station_id)}onSubmit(e){this.submitted=!0;const n=this.form.value;return n.hours=this.formHoursGroups.map(i=>i.value),console.log(n),!0}onDateSelection(e){e&&this.renderFormHours(e)}getHoursValue(e){return b().set("hours",e).startOf("hour").format("HH:mm")}onReset(){this.form.reset(),this.initForm()}onCancel(){}onOpenCalendar(e){e.monthSelectHandler=n=>{e._store.dispatch(e._actions.select(n.date))}}getDateText(){return b(this.date).format("DD MMM YYYYY")}get hoursArray(){return this.form.get("hours")}get formHoursGroups(){return this.hoursArray.controls}getHourGroup(e){const n=new r.cw({hour:new r.NI(null),ddff:new r.NI(null),dd:new r.NI(null),ff:new r.NI(null),flag:new r.NI(null)});return e&&n.patchValue(e),n}renderFormHours(e){this.resetHours();for(let n=0;n<=this.hoursList.length;n++)this.hoursArray.push(this.getHourGroup({hour:n,ddff:0,dd:0,ff:0,flag:M.M}))}resetHours(){this.form.controls.hours=new r.Oe([])}initForm(){this.form=new r.cw({station:new r.NI(null,r.kI.required),date:new r.NI(new Date,r.kI.required),hours:new r.Oe([]),total:new r.NI(null)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(v.k))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-form-hourly-wind"]],decls:4,vars:1,consts:[["novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],["novalidate","",3,"formGroup","ngSubmit"],["sm","12",1,"text-end"],["sm","12"],[1,"form-group","p-3","mt-4"],["xs","12","md","6","xl","3"],[1,"mb-2"],["cLabel","","for","station"],["id","station","type","hidden","formControlName","station","aria-label","default input","cFormControl","",3,"ngClass"],["class","typeahead-selection theme form-group",4,"ngIf"],[3,"onSelection",4,"ngIf"],["col","12","class","invalid-feedback",4,"ngIf"],["cLabel","","for","element"],[1,"mb-3"],["cInputGroupText","","id","basic-addon1"],["cIcon","","name","cilCalendar"],["id","element","type","hidden","formControlName","date","aria-label","default input","cFormControl","","placeholder","Station Name"],["name","monthYear","placeholder","Select Year & Month","cFormControl","","bsDatepicker","","autocomplete","off",3,"bsConfig","bsValue","ngClass","bsValueChange","onShown"],["sm","12","class","invalid-feedback",4,"ngIf"],[1,"form-group","p-3","mt-2"],[4,"ngIf"],["formArrayName","hours",4,"ngIf"],["color","info","class","mt-4",4,"ngIf"],[1,"my-4"],["xs","12 py-4"],["type","submit","cButton","","color","dark",1,"px-3"],["aria-hidden","true","size","sm",4,"ngIf"],["type","button","cButton","","color","dark",1,"px-3","mx-1",3,"click"],["type","button","cButton","","color","dark",1,"px-3",3,"click"],[1,"typeahead-selection","theme","form-group"],[1,"typeahead-selection-inner"],[1,"btn",3,"click"],["cIcon","","name","cilX"],[3,"onSelection"],["col","12",1,"invalid-feedback"],["cIcon","","name","cilXCircle"],["sm","12",1,"invalid-feedback"],["formArrayName","hours"],["sm","12","md","6","lg","4","xl","3"],[1,"hourly-header"],[1,"py-1"],["sm","12","md","6","lg","4","xl","3",1,"d-none","d-md-block"],["sm","12","md","6","lg","4","xl","3",1,"d-none","d-lg-block"],["md","12",4,"ngFor","ngForOf"],["md","12"],[3,"disabled","modified","group","onDirty"],["color","info",1,"mt-4"],["aria-hidden","true","size","sm"]],template:function(e,n){1&e&&(t.TgZ(0,"h5"),t._uU(1," Hourly Wind data for selected date "),t.qZA(),t._UZ(2,"hr"),t.YNc(3,re,43,18,"form",0)),2&e&&(t.xp6(3),t.Q6J("ngIf",n.form))},directives:[s.O5,r._Y,r.JL,r.sg,c.iok,c.Yp0,$,c.eFW,r.Fj,c.oHf,r.JJ,r.u,s.mk,c.g8K,c.jOm,Q.ar,I.Y5,I.Np,c.Hq3,L.n,r.CE,s.sg,Lt,c.wxo,c.ORR],pipes:[s.OU],styles:[".hourly-header[_ngcontent-%COMP%]   c-col[_ngcontent-%COMP%]{text-align:center;font-size:.9rem;padding-left:.3rem}.hourly-header[_ngcontent-%COMP%]   c-col[_ngcontent-%COMP%]:first-child{padding-left:2%}.form-info[_ngcontent-%COMP%]{position:relative;padding:1rem .8rem .2rem 5rem;background-color:#d6ebff;border:1px solid #c2e0ff;border-radius:.25rem;color:#333}.form-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:1rem;left:.8rem;width:4rem}.form-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.1rem}.form-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;margin-top:.5rem}"]}),o})(),le=(()=>{class o{constructor(){this.modified=!1,this.group=new r.cw({hour:new r.NI(1),value:new r.NI(null,r.kI.required),flag:new r.NI(null)}),this.disabled=!1,this.onDirty=new t.vpe}ngOnInit(){this.group.valueChanges.pipe((0,g.h)(e=>!this.modified)).subscribe(e=>{console.log(e),this.onDirty.emit(!0)})}ngOnChanges(e){this.disabled?this.group.disable():this.group.enable()}get fg(){return this.group.controls}hourVal(e){return e?e&&e<10?`0${e}`:`${e}`:"00"}selectFlag(e){this.group.controls.flag.setValue(e)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-hourly-form-group"]],inputs:{modified:"modified",group:"group",disabled:"disabled"},outputs:{onDirty:"onDirty"},features:[t.TTD],decls:9,vars:4,consts:[[1,"hourly-data-row",3,"formGroup"],[1,"py-2","label"],[1,"py-1"],["formControlName","value","aria-label","value","cFormControl",""],[1,"py-1","text-center"],["type","hidden","formControlName","flag","aria-label","flag","cFormControl",""],[3,"flag","disabled","onSelect"]],template:function(e,n){1&e&&(t.TgZ(0,"c-row",0),t.TgZ(1,"c-col",1),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"c-col",2),t._UZ(5,"input",3),t.qZA(),t.TgZ(6,"c-col",4),t._UZ(7,"input",5),t.TgZ(8,"app-flag-picker",6),t.NdJ("onSelect",function(a){return n.selectFlag(a)}),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",n.group),t.xp6(3),t.Oqu(n.hourVal(n.fg.hour.value)),t.xp6(5),t.Q6J("flag",n.fg.flag.value)("disabled",n.disabled))},directives:[c.iok,r.JL,r.sg,c.Yp0,r.Fj,c.oHf,r.JJ,r.u,G],styles:[".hourly-data-row[_ngcontent-%COMP%]{padding:.1rem .3rem;margin:.2rem 0;background-color:#e5ecf2;border:1px solid #cdd4da;border-radius:.2rem}.hourly-data-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{text-align:center}.hourly-data-row[_ngcontent-%COMP%]   c-col[_ngcontent-%COMP%]{padding:0 .2rem}.hourly-data-row.has-error[_ngcontent-%COMP%]{background-color:#ffe2e2;border:1px solid #dd6868}.hourly-data-row[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:disabled{cursor:not-allowed}"]}),o})();function ae(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"div",30),t.TgZ(1,"div",31),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"a",32),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).resetStation()}),t.O4$(),t._UZ(5,"svg",33),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(3),t.Oqu(e.station.station_name)}}function ce(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"app-station-selection",34),t.NdJ("onSelection",function(i){return t.CHM(e),t.oxw(2).onStationSelect(i)}),t.qZA()}}function se(o,l){1&o&&(t.TgZ(0,"div"),t.O4$(),t._UZ(1,"svg",36),t._uU(2," Station selection required."),t.qZA())}function _e(o,l){if(1&o&&(t.TgZ(0,"div",35),t.YNc(1,se,3,0,"div",21),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.station.errors.required)}}function me(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"div",30),t.TgZ(1,"div",31),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"a",32),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).resetElement()}),t.O4$(),t._UZ(5,"svg",33),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(3),t.Oqu(e.element.element_name)}}function ue(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"app-element-selection",34),t.NdJ("onSelection",function(i){return t.CHM(e),t.oxw(2).onElementSelect(i)}),t.qZA()}}function pe(o,l){1&o&&(t.TgZ(0,"div"),t.O4$(),t._UZ(1,"svg",36),t._uU(2," Element selection is required."),t.qZA())}function de(o,l){if(1&o&&(t.TgZ(0,"div",35),t.YNc(1,pe,3,0,"div",21),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.element.errors.required)}}function ge(o,l){1&o&&(t.TgZ(0,"div",37),t.O4$(),t._UZ(1,"svg",36),t._uU(2," Year and Month is required "),t.qZA())}function fe(o,l){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij("for ",e.getDateText(),"")}}function he(o,l){if(1&o&&(t.TgZ(0,"p"),t._uU(1," Values must be between "),t.TgZ(2,"strong"),t._uU(3),t.ALo(4,"number"),t.qZA(),t._uU(5," and "),t.TgZ(6,"strong"),t._uU(7),t.ALo(8,"number"),t.qZA(),t.qZA()),2&o){const e=t.oxw(3);t.xp6(3),t.hij(" ",t.lcZ(4,2,e.element.lower_limit)," "),t.xp6(4),t.hij("",t.lcZ(8,4,e.element.upper_limit)," ")}}function ye(o,l){1&o&&t._UZ(0,"p")}function Ze(o,l){if(1&o&&(t.TgZ(0,"c-row"),t.TgZ(1,"c-col",38),t.TgZ(2,"div",39),t._UZ(3,"img",40),t.TgZ(4,"h5"),t._uU(5,"Please use the following information for data entry"),t.qZA(),t.YNc(6,he,9,6,"p",21),t.YNc(7,ye,1,0,"p",21),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(6),t.Q6J("ngIf",e.element.lower_limit&&e.element.upper_limit),t.xp6(1),t.Q6J("ngIf",!e.element.lower_limit||!e.element.upper_limit)}}function Ce(o,l){1&o&&(t.TgZ(0,"c-row",41),t.TgZ(1,"c-col",42),t.TgZ(2,"c-row",43),t.TgZ(3,"c-col",44),t._uU(4,"Hour"),t.qZA(),t.TgZ(5,"c-col",44),t._uU(6,"Value"),t.qZA(),t.TgZ(7,"c-col",44),t._uU(8,"Flag"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"c-col",45),t.TgZ(10,"c-row",43),t.TgZ(11,"c-col",44),t._uU(12,"Hour"),t.qZA(),t.TgZ(13,"c-col",44),t._uU(14,"Value"),t.qZA(),t.TgZ(15,"c-col",44),t._uU(16,"Flag"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"c-col",46),t.TgZ(18,"c-row",43),t.TgZ(19,"c-col",44),t._uU(20,"Hour"),t.qZA(),t.TgZ(21,"c-col",44),t._uU(22,"Value"),t.qZA(),t.TgZ(23,"c-col",44),t._uU(24,"Flag"),t.qZA(),t.qZA(),t.qZA(),t.qZA())}function ve(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"c-col",48),t.TgZ(1,"app-hourly-form-group",49),t.NdJ("onDirty",function(i){return t.CHM(e),t.oxw(3).onFormModified(i)}),t.qZA(),t.qZA()}if(2&o){const e=l.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function Te(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"c-col",48),t.TgZ(1,"app-hourly-form-group",49),t.NdJ("onDirty",function(i){return t.CHM(e),t.oxw(3).onFormModified(i)}),t.qZA(),t.qZA()}if(2&o){const e=l.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function be(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"c-col",48),t.TgZ(1,"app-hourly-form-group",49),t.NdJ("onDirty",function(i){return t.CHM(e),t.oxw(3).onFormModified(i)}),t.qZA(),t.qZA()}if(2&o){const e=l.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function xe(o,l){if(1&o&&(t.TgZ(0,"c-row",41),t.TgZ(1,"c-col",42),t.TgZ(2,"c-row"),t.YNc(3,ve,2,3,"c-col",47),t.ALo(4,"slice"),t.qZA(),t.qZA(),t.TgZ(5,"c-col",42),t.TgZ(6,"c-row"),t.YNc(7,Te,2,3,"c-col",47),t.ALo(8,"slice"),t.qZA(),t.qZA(),t.TgZ(9,"c-col",42),t.TgZ(10,"c-row"),t.YNc(11,be,2,3,"c-col",47),t.ALo(12,"slice"),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(3),t.Q6J("ngForOf",t.Dn7(4,3,e.formHoursGroups,0,8)),t.xp6(4),t.Q6J("ngForOf",t.Dn7(8,7,e.formHoursGroups,8,16)),t.xp6(4),t.Q6J("ngForOf",t.Dn7(12,11,e.formHoursGroups,16,24))}}function Ae(o,l){1&o&&(t.TgZ(0,"c-alert",50),t._uU(1,"Please select a date to view form."),t.qZA())}function Me(o,l){1&o&&t._UZ(0,"c-spinner",51)}const j=function(o){return{"is-invalid":o}};function Fe(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"form",1),t.NdJ("ngSubmit",function(i){return t.CHM(e),t.oxw().onSubmit(i)}),t.TgZ(1,"c-row"),t.TgZ(2,"c-col",2),t._UZ(3,"app-flag-legend"),t.qZA(),t.TgZ(4,"c-col",3),t.TgZ(5,"fieldset",4),t.TgZ(6,"legend"),t._uU(7,"Form Selector"),t.qZA(),t.TgZ(8,"c-row"),t.TgZ(9,"c-col",5),t.TgZ(10,"div",6),t.TgZ(11,"label",7),t._uU(12,"Station"),t.qZA(),t._UZ(13,"input",8),t.YNc(14,ae,6,1,"div",9),t.YNc(15,ce,1,0,"app-station-selection",10),t.YNc(16,_e,2,1,"div",11),t.qZA(),t.qZA(),t.TgZ(17,"c-col",5),t.TgZ(18,"div",6),t.TgZ(19,"label",12),t._uU(20,"Element"),t.qZA(),t._UZ(21,"input",13),t.YNc(22,me,6,1,"div",9),t.YNc(23,ue,1,0,"app-element-selection",10),t.YNc(24,de,2,1,"div",11),t.qZA(),t.qZA(),t.TgZ(25,"c-col",5),t.TgZ(26,"label",12),t._uU(27,"Day/Month/Year"),t.qZA(),t.TgZ(28,"c-input-group",14),t.TgZ(29,"span",15),t.O4$(),t._UZ(30,"svg",16),t.qZA(),t.kcU(),t._UZ(31,"input",17),t.TgZ(32,"input",18),t.NdJ("bsValueChange",function(i){return t.CHM(e),t.oxw().onDateSelection(i)})("onShown",function(i){return t.CHM(e),t.oxw().onOpenCalendar(i)}),t.qZA(),t.YNc(33,ge,3,0,"div",19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"fieldset",20),t.TgZ(35,"legend"),t._uU(36,"Hourly Data "),t.YNc(37,fe,2,1,"span",21),t.qZA(),t.YNc(38,Ze,8,2,"c-row",21),t.YNc(39,Ce,25,0,"c-row",22),t.YNc(40,xe,13,15,"c-row",22),t.YNc(41,Ae,2,0,"c-alert",23),t.qZA(),t._UZ(42,"hr",24),t.TgZ(43,"c-row"),t.TgZ(44,"c-col",25),t.TgZ(45,"button",26),t.YNc(46,Me,1,0,"c-spinner",27),t._uU(47," Submit "),t.qZA(),t.TgZ(48,"button",28),t.NdJ("click",function(){return t.CHM(e),t.oxw().onReset()}),t._uU(49," Reset "),t.qZA(),t.TgZ(50,"button",29),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCancel()}),t._uU(51," Cancel "),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(13),t.Q6J("ngClass",t.VKq(19,j,(e.submitted||e.f.station.touched)&&e.f.station.invalid)),t.xp6(1),t.Q6J("ngIf",e.station),t.xp6(1),t.Q6J("ngIf",!e.station),t.xp6(1),t.Q6J("ngIf",e.f.station.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(21,j,(e.submitted||e.f.element.touched)&&e.f.element.invalid)),t.xp6(1),t.Q6J("ngIf",e.element),t.xp6(1),t.Q6J("ngIf",!e.element),t.xp6(1),t.Q6J("ngIf",e.f.element.errors),t.xp6(8),t.Q6J("bsConfig",e.bsConfig)("bsValue",e.monthYearValue)("ngClass",t.VKq(23,j,e.submitted&&e.f.monthYear.invalid)),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.f.monthYear.invalid),t.xp6(4),t.Q6J("ngIf",e.date),t.xp6(1),t.Q6J("ngIf",e.element&&e.formHoursGroups.length),t.xp6(1),t.Q6J("ngIf",e.formHoursGroups.length),t.xp6(1),t.Q6J("ngIf",e.formHoursGroups.length),t.xp6(1),t.Q6J("ngIf",!e.formHoursGroups.length),t.xp6(5),t.Q6J("ngIf",e.loading)}}let we=(()=>{class o{constructor(e){this.responsiveSvc=e,this.submitted=!1,this.loading=!1,this.error="",this.monthModified=!1,this.monthYearValue=new Date,this.bsConfig={isAnimated:!0,containerClass:"theme-blue",dateInputFormat:"DD/MM/YYYY"},this.hoursList=[24,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]}ngOnInit(){this.initForm(),this.responsiveSvc.screenSize.subscribe(e=>{console.log(e)})}get f(){return this.form.controls}get isEditable(){return!!this.station&&!!this.element}get isModified(){return this.monthModified}onFormModified(e){this.monthModified=e}resetStation(){this.station=void 0,this.form.controls.station.reset()}onStationSelect(e){this.station=e,this.form.controls.station.setValue(e.station_id)}resetElement(){this.element=void 0,this.form.controls.element.reset()}onElementSelect(e){this.element=e,this.form.controls.element.setValue(e.element_id)}onSubmit(e){this.submitted=!0;const n=this.form.value;return n.hours=this.formHoursGroups.map(i=>i.value),console.log(n),!0}onDateSelection(e){e&&this.renderFormHours(e)}getHoursValue(e){return b().set("hours",e).startOf("hour").format("HH:mm")}onReset(){this.form.reset(),this.initForm()}onCancel(){}onOpenCalendar(e){e.monthSelectHandler=n=>{e._store.dispatch(e._actions.select(n.date))},e.setViewMode("month")}getDateText(){return b(this.date).format("DD MMM YYYYY")}get hoursArray(){return this.form.get("hours")}get formHoursGroups(){return this.hoursArray.controls}getHourGroup(e){const n=new r.cw({hour:new r.NI(null),value:new r.NI(null,[r.kI.min(0),r.kI.max(70)]),flag:new r.NI(null)});return e&&n.patchValue(e),n}renderFormHours(e){this.resetHours();for(let n=0;n<=this.hoursList.length;n++)this.hoursArray.push(this.getHourGroup({hour:n,value:0,flag:M.M}))}resetHours(){this.form.controls.days=new r.Oe([])}initForm(){this.form=new r.cw({station:new r.NI(null,r.kI.required),element:new r.NI(null,r.kI.required),date:new r.NI(new Date,r.kI.required),hours:new r.Oe([]),total:new r.NI(null)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(v.k))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-form-hourly"]],decls:4,vars:1,consts:[["novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],["novalidate","",3,"formGroup","ngSubmit"],["sm","12",1,"text-end"],["sm","12"],[1,"form-group","p-3","mt-4"],["xs","12","md","6","xl","3"],[1,"mb-2"],["cLabel","","for","station"],["id","station","type","hidden","formControlName","station","aria-label","default input","cFormControl","",3,"ngClass"],["class","typeahead-selection theme form-group",4,"ngIf"],[3,"onSelection",4,"ngIf"],["col","12","class","invalid-feedback",4,"ngIf"],["cLabel","","for","element"],["id","element","type","hidden","formControlName","element","aria-label","default input","cFormControl","",3,"ngClass"],[1,"mb-3"],["cInputGroupText","","id","basic-addon1"],["cIcon","","name","cilCalendar"],["id","element","type","hidden","formControlName","date","aria-label","default input","cFormControl","","placeholder","Station Name"],["name","monthYear","placeholder","Select Year & Month","cFormControl","","bsDatepicker","","autocomplete","off",3,"bsConfig","bsValue","ngClass","bsValueChange","onShown"],["sm","12","class","invalid-feedback",4,"ngIf"],[1,"form-group","p-3","mt-2"],[4,"ngIf"],["formArrayName","hours",4,"ngIf"],["color","info","class","mt-4",4,"ngIf"],[1,"my-4"],["xs","12 py-4"],["type","submit","cButton","","color","dark",1,"px-3"],["aria-hidden","true","size","sm",4,"ngIf"],["type","button","cButton","","color","dark",1,"px-3","mx-1",3,"click"],["type","button","cButton","","color","dark",1,"px-3",3,"click"],[1,"typeahead-selection","theme","form-group"],[1,"typeahead-selection-inner"],[1,"btn",3,"click"],["cIcon","","name","cilX"],[3,"onSelection"],["col","12",1,"invalid-feedback"],["cIcon","","name","cilXCircle"],["sm","12",1,"invalid-feedback"],["md","12 mt-3 mb-3"],[1,"form-info"],["src","./assets/img/icons/info.png","alt",""],["formArrayName","hours"],["sm","12","md","6","lg","4","xl","3"],[1,"hourly-header"],[1,"py-1"],["sm","12","md","6","lg","4","xl","3",1,"d-none","d-md-block"],["sm","12","md","6","lg","4","xl","3",1,"d-none","d-lg-block"],["md","12",4,"ngFor","ngForOf"],["md","12"],[3,"disabled","modified","group","onDirty"],["color","info",1,"mt-4"],["aria-hidden","true","size","sm"]],template:function(e,n){1&e&&(t.TgZ(0,"h5"),t._uU(1," Hourly data for selected date "),t.qZA(),t._UZ(2,"hr"),t.YNc(3,Fe,52,25,"form",0)),2&e&&(t.xp6(3),t.Q6J("ngIf",n.form))},directives:[s.O5,r._Y,r.JL,r.sg,c.iok,c.Yp0,$,c.eFW,r.Fj,c.oHf,r.JJ,r.u,s.mk,c.g8K,c.jOm,Q.ar,I.Y5,I.Np,c.Hq3,L.n,K.Y,r.CE,s.sg,le,c.wxo,c.ORR],pipes:[s.JJ,s.OU],styles:[".hourly-header[_ngcontent-%COMP%]   c-col[_ngcontent-%COMP%]{text-align:center;font-size:.9rem;padding-left:.3rem}.hourly-header[_ngcontent-%COMP%]   c-col[_ngcontent-%COMP%]:first-child{padding-left:2%}.form-info[_ngcontent-%COMP%]{position:relative;padding:1rem .8rem .2rem 5rem;background-color:#d6ebff;border:1px solid #c2e0ff;border-radius:.25rem;color:#333}.form-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:1rem;left:.8rem;width:4rem}.form-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.1rem}.form-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;margin-top:.5rem}"]}),o})();var qe=_(9468),Oe=_(3067),V=(()=>{return(o=V||(V={})).Celsius="Degree Celcius",o.DegreeF="Degree Fahrenheit",V;var o})(),k=(()=>{return(o=k||(k={})).mm="Millimeters",o.cm="Centimeters",o.in="Inches",k;var o})(),J=(()=>{return(o=J||(J={})).Foot="Feet",o.Metre="Metre",o.Kilometres="Kilometres",J;var o})(),H=(()=>{return(o=H||(H={})).Metres="Metres",o.Kilometres="Kilometres",o.StatuteMiles="Statute Miles",H;var o})();const Ee={temperature:[{key:"DEGREE CELSIUS",value:V.Celsius,symbol:"\xb0C"},{key:"DEGREE FAHRENHEIT",value:V.DegreeF,symbol:"\xb0F"}],precipitation:[{key:"MILIMETER",value:k.mm,symbol:"mm"},{key:"CENTIMETER",value:k.cm,symbol:"mm"},{key:"INCHE",value:k.in,symbol:"in"}],cloudHeight:[{key:"FEET",value:J.Foot,symbol:"ft"},{key:"METRE",value:J.Metre,symbol:"M"},{key:"KILOMETERS",value:J.Kilometres,symbol:"M"}],visibility:[{key:"METRES",value:H.Metres,symbol:"M"},{key:"KILOMETRES",value:H.Kilometres,symbol:"Km"},{key:"STATUTE MILES",value:H.StatuteMiles,symbol:"M"}]};var Pe=_(9935),Ne=_(74),ke=_(4379),Je=_(2997),He=_(2098),Ye=_(5077);const $e=["inputValue"];function Qe(o,l){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.fg.day.value)}}function Le(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){return t.CHM(e),t.oxw().revert()}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.fg.day.value)}}let Ge=(()=>{class o{constructor(e){this.ref=e,this.modified=!1,this.group=new r.cw({day:new r.NI(1),value:new r.NI(null,r.kI.required),flag:new r.NI(null),period:new r.NI(null)}),this.disabled=!1,this.onDirty=new t.vpe,this.onRevert=new t.vpe,this.onFocus=new t.vpe,this.onBlur=new t.vpe,this.onReturn=new t.vpe,this.valFocus=!1,this.hasFocus=!1}ngOnInit(){this.group.valueChanges.pipe((0,g.h)(e=>!this.modified)).subscribe(e=>{this.onDirty.emit(!0)})}ngOnChanges(e){this.disabled?this.group.disable():this.group.enable()}ngAfterViewInit(){(0,Je.of)(!0).pipe((0,He.g)(500)).subscribe(()=>{this.pristine=this.group.value}),(0,Ye.R)(this.ref.nativeElement,"keyup").pipe((0,g.h)(e=>13===e.keyCode&&this.valFocus)).subscribe(e=>{this.onValRetunKey()})}selectFlag(e){this.fg.flag.value!==e&&(this.fg.flag.setValue(e),this.fg.flag.markAsDirty())}focusValue(){this.txtVal.nativeElement.focus()}onValRetunKey(){(!this.fg.value.value||0==+this.fg.value.value)&&this.fg.flag.setValue(M.M),this.onReturn.emit(+this.fg.day.value)}onValueFocus(){this.hasFocus=!0,this.onFocus.emit(this.fg.day.value),this.valFocus=!0}onValueBlur(e){this.hasFocus=!1;const n=this.fg.value.value;this.pristine.value===n&&""!==n&&this.fg.value.markAsPristine(),""===n&&this.fg.flag.value!==M.M&&this.selectFlag(M.M),""!==n&&this.fg.flag.value===M.M&&this.selectFlag(M.N),this.onBlur.emit(this.fg.day.value),this.valFocus=!1}get fg(){return this.group.controls}get isDirty(){return this.fg.value.dirty||this.fg.flag.dirty||this.fg.period.dirty}get isInvalid(){return this.fg.value.dirty&&""!==this.fg.value.value&&this.fg.flag.value===M.M}get styles(){const e={"has-focus":this.hasFocus};return this.isDirty&&(e["is-dirty"]=!0),this.isInvalid&&(e["is-dirty"]=!1,e["is-invalid"]=!0),e}revert(){this.onRevert.emit(+this.fg.day.value)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-daily-day-form-group"]],viewQuery:function(e,n){if(1&e&&t.Gf($e,5),2&e){let i;t.iGM(i=t.CRH())&&(n.txtVal=i.first)}},inputs:{modified:"modified",group:"group",disabled:"disabled"},outputs:{onDirty:"onDirty",onRevert:"onRevert",onFocus:"onFocus",onBlur:"onBlur",onReturn:"onReturn"},features:[t.TTD],decls:12,vars:6,consts:[[1,"daily-data-row",3,"ngClass","formGroup"],[1,"py-2","label"],[4,"ngIf"],["type","button","cButton","","color","dark","shape","rounded-pill",3,"click",4,"ngIf"],[1,"py-1"],["formControlName","value","aria-label","value","cFormControl","",3,"focus","blur"],["inputValue",""],[1,"py-1","text-center"],["type","hidden","formControlName","flag","aria-label","flag","cFormControl",""],[3,"flag","disabled","onSelect"],["formControlName","period","aria-label","period","cFormControl",""],["type","button","cButton","","color","dark","shape","rounded-pill",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"c-row",0),t.TgZ(1,"c-col",1),t.YNc(2,Qe,2,1,"span",2),t.YNc(3,Le,2,1,"button",3),t.qZA(),t.TgZ(4,"c-col",4),t.TgZ(5,"input",5,6),t.NdJ("focus",function(){return n.onValueFocus()})("blur",function(a){return n.onValueBlur(a)}),t.qZA(),t.qZA(),t.TgZ(7,"c-col",7),t._UZ(8,"input",8),t.TgZ(9,"app-flag-picker",9),t.NdJ("onSelect",function(a){return n.selectFlag(a)}),t.qZA(),t.qZA(),t.TgZ(10,"c-col",4),t._UZ(11,"input",10),t.qZA(),t.qZA()),2&e&&(t.Q6J("ngClass",n.styles)("formGroup",n.group),t.xp6(2),t.Q6J("ngIf",!n.isDirty),t.xp6(1),t.Q6J("ngIf",n.isDirty),t.xp6(6),t.Q6J("flag",n.fg.flag.value)("disabled",n.disabled))},directives:[c.iok,s.mk,r.JL,r.sg,c.Yp0,s.O5,r.Fj,c.oHf,r.JJ,r.u,G,c.Hq3],styles:[".daily-data-row[_ngcontent-%COMP%]{padding:.1rem .3rem;margin:.2rem 0;background-color:#e5ecf2;border:1px solid #cdd4da;border-radius:.2rem}.daily-data-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{text-align:center}.daily-data-row[_ngcontent-%COMP%]   c-col[_ngcontent-%COMP%]{padding:0 .2rem}.daily-data-row.is-invalid[_ngcontent-%COMP%]{background-color:#ffe2e2;border:1px solid #dd6868}.daily-data-row.is-dirty[_ngcontent-%COMP%]{background-color:#a3e8fd;border:1px solid #8cc9db}.daily-data-row.has-focus[_ngcontent-%COMP%]{background-color:#e2e7ec;border:1px solid #9dacb9;box-shadow:#00000040 1px 1px 0 1px}.daily-data-row[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:disabled{cursor:not-allowed}.daily-data-row[_ngcontent-%COMP%]   .btn.rounded-pill[_ngcontent-%COMP%]{padding:.1rem .4rem;font-size:.9rem}"]}),o})();const Ve=["dailyGroup"];function Re(o,l){1&o&&(t.TgZ(0,"c-col",2),t._UZ(1,"app-infinite-loading"),t.qZA())}function Be(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"div",46),t.TgZ(1,"div",47),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).resetStation()}),t.O4$(),t._UZ(5,"svg",49),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(3),t.Oqu(e.station.station_name)}}function We(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"app-station-selection",50),t.NdJ("onSelection",function(i){return t.CHM(e),t.oxw(2).onStationSelect(i)}),t.qZA()}}function Ke(o,l){1&o&&(t.TgZ(0,"div"),t.O4$(),t._UZ(1,"svg",52),t._uU(2," Station selection required."),t.qZA())}function je(o,l){if(1&o&&(t.TgZ(0,"div",51),t.YNc(1,Ke,3,0,"div",34),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.station.errors.required)}}function ze(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"div",46),t.TgZ(1,"div",47),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).resetElement()}),t.O4$(),t._UZ(5,"svg",49),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(3),t.Oqu(e.element.element_name)}}function Xe(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"app-element-selection",50),t.NdJ("onSelection",function(i){return t.CHM(e),t.oxw(2).onElementSelect(i)}),t.qZA()}}function to(o,l){1&o&&(t.TgZ(0,"div"),t.O4$(),t._UZ(1,"svg",52),t._uU(2," Element selection is required."),t.qZA())}function eo(o,l){if(1&o&&(t.TgZ(0,"div",51),t.YNc(1,to,3,0,"div",34),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.element.errors.required)}}function oo(o,l){1&o&&(t.TgZ(0,"div",53),t.O4$(),t._UZ(1,"svg",52),t._uU(2," Year and Month is required "),t.qZA())}function no(o,l){if(1&o&&(t.TgZ(0,"option",54),t._uU(1),t.qZA()),2&o){const e=l.$implicit,n=t.oxw(2);t.Q6J("value",e),t.xp6(1),t.Oqu(n.getHoursValue(e))}}function ro(o,l){1&o&&(t.TgZ(0,"div"),t.O4$(),t._UZ(1,"svg",52),t._uU(2," Hour selection is required."),t.qZA())}function io(o,l){if(1&o&&(t.TgZ(0,"div",51),t.YNc(1,ro,3,0,"div",34),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.dayHour.errors.required)}}function lo(o,l){if(1&o&&(t.TgZ(0,"option",54),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.Q6J("value",e.key),t.xp6(1),t.Oqu(e.value)}}function ao(o,l){1&o&&(t.TgZ(0,"div"),t.O4$(),t._UZ(1,"svg",52),t._uU(2," Selection is required."),t.qZA())}function co(o,l){if(1&o&&(t.TgZ(0,"div",51),t.YNc(1,ao,3,0,"div",34),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.temperature.errors.required)}}function so(o,l){if(1&o&&(t.TgZ(0,"option",54),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.Q6J("value",e.key),t.xp6(1),t.Oqu(e.value)}}function _o(o,l){1&o&&(t.TgZ(0,"div"),t.O4$(),t._UZ(1,"svg",52),t._uU(2," Selection is required."),t.qZA())}function mo(o,l){if(1&o&&(t.TgZ(0,"div",51),t.YNc(1,_o,3,0,"div",34),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.precip.errors.required)}}function uo(o,l){if(1&o&&(t.TgZ(0,"option",54),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.Q6J("value",e.key),t.xp6(1),t.Oqu(e.value)}}function po(o,l){1&o&&(t.TgZ(0,"div"),t.O4$(),t._UZ(1,"svg",52),t._uU(2," Selection is required."),t.qZA())}function go(o,l){if(1&o&&(t.TgZ(0,"div",51),t.YNc(1,po,3,0,"div",34),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.cloud_height.errors.required)}}function fo(o,l){if(1&o&&(t.TgZ(0,"option",54),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.Q6J("value",e.key),t.xp6(1),t.Oqu(e.value)}}function ho(o,l){1&o&&(t.TgZ(0,"div"),t.O4$(),t._UZ(1,"svg",52),t._uU(2," Selection is required."),t.qZA())}function yo(o,l){if(1&o&&(t.TgZ(0,"div",51),t.YNc(1,ho,3,0,"div",34),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.visibility.errors.required)}}function Zo(o,l){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij("for ",e.getDateText(e.year,e.month),"")}}function Co(o,l){if(1&o&&(t.TgZ(0,"c-row"),t.TgZ(1,"c-col",55),t.TgZ(2,"c-alert",56),t.TgZ(3,"strong"),t._uU(4,"Error(s) Found!"),t.qZA(),t._uU(5),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(5),t.hij(" ",e.error,"")}}function vo(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"p"),t._uU(1," Values must be between "),t.TgZ(2,"strong"),t._uU(3),t.ALo(4,"number"),t.qZA(),t._uU(5," and "),t.TgZ(6,"strong"),t._uU(7),t.ALo(8,"number"),t.qZA(),t.TgZ(9,"a",60),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).moreInfo()}),t._uU(10," more... "),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(3);t.xp6(3),t.hij(" ",t.lcZ(4,2,e.element.lower_limit)," "),t.xp6(4),t.hij("",t.lcZ(8,4,e.element.upper_limit)," ")}}function To(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"p"),t._uU(1," No validation information available for the selected element. "),t.TgZ(2,"button",61),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).moreInfo()}),t._uU(3," more... "),t.qZA(),t.qZA()}}function bo(o,l){if(1&o&&(t.TgZ(0,"c-row"),t.TgZ(1,"c-col",57),t.TgZ(2,"div",58),t._UZ(3,"img",59),t.TgZ(4,"h5"),t._uU(5,"Please use the following information for data entry"),t.qZA(),t.YNc(6,vo,11,6,"p",34),t.YNc(7,To,4,0,"p",34),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(6),t.Q6J("ngIf",e.element.lower_limit&&e.element.upper_limit),t.xp6(1),t.Q6J("ngIf",!e.element.lower_limit||!e.element.upper_limit)}}function xo(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"c-col",55),t.TgZ(1,"app-daily-day-form-group",69,70),t.NdJ("onReturn",function(i){return t.CHM(e),t.oxw(3).handleReturn(i)})("onFocus",function(i){return t.CHM(e),t.oxw(3).dayFocus(i)})("onBlur",function(i){return t.CHM(e),t.oxw(3).dayBlur(i)})("onDirty",function(i){return t.CHM(e),t.oxw(3).onFormModified(i)})("onRevert",function(i){return t.CHM(e),t.oxw(3).revertDay(i)}),t.qZA(),t.qZA()}if(2&o){const e=l.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function Ao(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"c-col",55),t.TgZ(1,"app-daily-day-form-group",69,70),t.NdJ("onReturn",function(i){return t.CHM(e),t.oxw(3).handleReturn(i)})("onFocus",function(i){return t.CHM(e),t.oxw(3).dayFocus(i)})("onBlur",function(i){return t.CHM(e),t.oxw(3).dayBlur(i)})("onDirty",function(i){return t.CHM(e),t.oxw(3).onFormModified(i)})("onRevert",function(i){return t.CHM(e),t.oxw(3).revertDay(i)}),t.qZA(),t.qZA()}if(2&o){const e=l.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function Mo(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"c-col",55),t.TgZ(1,"app-daily-day-form-group",69,70),t.NdJ("onReturn",function(i){return t.CHM(e),t.oxw(3).handleReturn(i)})("onFocus",function(i){return t.CHM(e),t.oxw(3).dayFocus(i)})("onBlur",function(i){return t.CHM(e),t.oxw(3).dayBlur(i)})("onDirty",function(i){return t.CHM(e),t.oxw(3).onFormModified(i)})("onRevert",function(i){return t.CHM(e),t.oxw(3).revertDay(i)}),t.qZA(),t.qZA()}if(2&o){const e=l.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function Fo(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"c-col",55),t.TgZ(1,"app-daily-day-form-group",69,70),t.NdJ("onReturn",function(i){return t.CHM(e),t.oxw(3).handleReturn(i)})("onFocus",function(i){return t.CHM(e),t.oxw(3).dayFocus(i)})("onBlur",function(i){return t.CHM(e),t.oxw(3).dayBlur(i)})("onDirty",function(i){return t.CHM(e),t.oxw(3).onFormModified(i)})("onRevert",function(i){return t.CHM(e),t.oxw(3).revertDay(i)}),t.qZA(),t.qZA()}if(2&o){const e=l.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function wo(o,l){if(1&o&&(t.TgZ(0,"c-row",62),t.TgZ(1,"c-col",37),t.TgZ(2,"c-row",63),t.TgZ(3,"c-col",64),t._uU(4,"Day"),t.qZA(),t.TgZ(5,"c-col",64),t._uU(6,"Value"),t.qZA(),t.TgZ(7,"c-col",64),t._uU(8,"Flag"),t.qZA(),t.TgZ(9,"c-col",64),t._uU(10,"Period"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"c-col",65),t.TgZ(12,"c-row",63),t.TgZ(13,"c-col",64),t._uU(14,"Day"),t.qZA(),t.TgZ(15,"c-col",64),t._uU(16,"Value"),t.qZA(),t.TgZ(17,"c-col",64),t._uU(18,"Flag"),t.qZA(),t.TgZ(19,"c-col",64),t._uU(20,"Period"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"c-col",66),t.TgZ(22,"c-row",63),t.TgZ(23,"c-col",64),t._uU(24,"Day"),t.qZA(),t.TgZ(25,"c-col",64),t._uU(26,"Value"),t.qZA(),t.TgZ(27,"c-col",64),t._uU(28,"Flag"),t.qZA(),t.TgZ(29,"c-col",64),t._uU(30,"Period"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(31,"c-col",67),t.TgZ(32,"c-row",63),t.TgZ(33,"c-col",64),t._uU(34,"Day"),t.qZA(),t.TgZ(35,"c-col",64),t._uU(36,"Value"),t.qZA(),t.TgZ(37,"c-col",64),t._uU(38,"Flag"),t.qZA(),t.TgZ(39,"c-col",64),t._uU(40,"Period"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"c-col",37),t.TgZ(42,"c-row"),t.YNc(43,xo,3,3,"c-col",68),t.ALo(44,"slice"),t.qZA(),t.qZA(),t.TgZ(45,"c-col",37),t.TgZ(46,"c-row"),t.YNc(47,Ao,3,3,"c-col",68),t.ALo(48,"slice"),t.qZA(),t.qZA(),t.TgZ(49,"c-col",37),t.TgZ(50,"c-row"),t.YNc(51,Mo,3,3,"c-col",68),t.ALo(52,"slice"),t.qZA(),t.qZA(),t.TgZ(53,"c-col",37),t.TgZ(54,"c-row"),t.YNc(55,Fo,3,3,"c-col",68),t.ALo(56,"slice"),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(43),t.Q6J("ngForOf",t.Dn7(44,4,e.formDaysGroups,0,8)),t.xp6(4),t.Q6J("ngForOf",t.Dn7(48,8,e.formDaysGroups,8,16)),t.xp6(4),t.Q6J("ngForOf",t.Dn7(52,12,e.formDaysGroups,16,24)),t.xp6(4),t.Q6J("ngForOf",t.Dn7(56,16,e.formDaysGroups,24,31))}}function qo(o,l){1&o&&t._UZ(0,"c-spinner",71)}const E=function(o){return{"is-invalid":o}},Oo=function(o,l){return{"is-valid":o,"is-invalid":l}};function Do(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"form",1),t.NdJ("ngSubmit",function(i){return t.CHM(e),t.oxw().onSubmit(i)})("keydown.enter",function(i){return t.CHM(e),t.oxw().onReturn(i)}),t.TgZ(1,"c-row"),t.TgZ(2,"c-col",2),t._UZ(3,"app-flag-legend"),t.qZA(),t.YNc(4,Re,2,0,"c-col",3),t.TgZ(5,"c-col",4),t.TgZ(6,"fieldset",5),t.TgZ(7,"legend"),t._uU(8,"Form Selector"),t.qZA(),t.TgZ(9,"c-row"),t.TgZ(10,"c-col",6),t.TgZ(11,"div",7),t.TgZ(12,"label",8),t._uU(13,"Station"),t.qZA(),t._UZ(14,"input",9),t.YNc(15,Be,6,1,"div",10),t.YNc(16,We,1,0,"app-station-selection",11),t.YNc(17,je,2,1,"div",12),t.qZA(),t.qZA(),t.TgZ(18,"c-col",6),t.TgZ(19,"div",7),t.TgZ(20,"label",13),t._uU(21,"Element"),t.qZA(),t._UZ(22,"input",14),t.YNc(23,ze,6,1,"div",10),t.YNc(24,Xe,1,0,"app-element-selection",11),t.YNc(25,eo,2,1,"div",12),t.qZA(),t.qZA(),t.TgZ(26,"c-col",6),t.TgZ(27,"label",13),t._uU(28,"Month/Year"),t.qZA(),t.TgZ(29,"c-input-group",15),t.TgZ(30,"span",16),t.O4$(),t._UZ(31,"svg",17),t.qZA(),t.kcU(),t._UZ(32,"input",18),t.TgZ(33,"input",19),t.NdJ("bsValueChange",function(i){return t.CHM(e),t.oxw().onDateSelection(i)})("onShown",function(i){return t.CHM(e),t.oxw().onOpenCalendar(i)}),t.qZA(),t.YNc(34,oo,3,0,"div",20),t.qZA(),t.qZA(),t.TgZ(35,"c-col",6),t.TgZ(36,"div",7),t.TgZ(37,"label",21),t._uU(38,"Hour"),t.qZA(),t.TgZ(39,"select",22),t.NdJ("change",function(i){return t.CHM(e),t.oxw().onHourSelect(i.target)}),t.TgZ(40,"option",23),t._uU(41,"Select Hour"),t.qZA(),t.YNc(42,no,2,2,"option",24),t.qZA(),t.YNc(43,io,2,1,"div",12),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(44,"fieldset",25),t.TgZ(45,"legend"),t._uU(46,"Units"),t.qZA(),t.TgZ(47,"c-row"),t.TgZ(48,"c-col",26),t.TgZ(49,"div",7),t.TgZ(50,"label",21),t._uU(51,"Temperature"),t.qZA(),t.TgZ(52,"select",27),t.TgZ(53,"option",23),t._uU(54,"Please Select"),t.qZA(),t.YNc(55,lo,2,2,"option",24),t.qZA(),t.YNc(56,co,2,1,"div",12),t.qZA(),t.qZA(),t.TgZ(57,"c-col",26),t.TgZ(58,"div",7),t.TgZ(59,"label",28),t._uU(60,"Precipitation"),t.qZA(),t.TgZ(61,"select",29),t.TgZ(62,"option",23),t._uU(63,"Please Select"),t.qZA(),t.YNc(64,so,2,2,"option",24),t.qZA(),t.YNc(65,mo,2,1,"div",12),t.qZA(),t.qZA(),t.TgZ(66,"c-col",26),t.TgZ(67,"div",7),t.TgZ(68,"label",30),t._uU(69,"Cloud Height"),t.qZA(),t.TgZ(70,"select",31),t.TgZ(71,"option",23),t._uU(72,"Please Select"),t.qZA(),t.YNc(73,uo,2,2,"option",24),t.qZA(),t.YNc(74,go,2,1,"div",12),t.qZA(),t.qZA(),t.TgZ(75,"c-col",26),t.TgZ(76,"div",7),t.TgZ(77,"label",32),t._uU(78,"Visibility"),t.qZA(),t.TgZ(79,"select",33),t.TgZ(80,"option",23),t._uU(81,"Please Select"),t.qZA(),t.YNc(82,fo,2,2,"option",24),t.qZA(),t.YNc(83,yo,2,1,"div",12),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(84,"fieldset",5),t.TgZ(85,"legend"),t._uU(86,"Daily Data "),t.YNc(87,Zo,2,1,"span",34),t.qZA(),t.YNc(88,Co,6,1,"c-row",34),t.YNc(89,bo,8,2,"c-row",34),t.YNc(90,wo,57,20,"c-row",35),t.TgZ(91,"c-row",36),t.TgZ(92,"c-col",37),t.TgZ(93,"div",7),t.TgZ(94,"label",38),t._uU(95,"Total"),t.qZA(),t._UZ(96,"input",39),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(97,"hr",40),t.TgZ(98,"c-row"),t.TgZ(99,"c-col",41),t.TgZ(100,"button",42),t.YNc(101,qo,1,0,"c-spinner",43),t._uU(102),t.qZA(),t.TgZ(103,"button",44),t.NdJ("click",function(){return t.CHM(e),t.oxw().onReset()}),t._uU(104," Reset "),t.qZA(),t.TgZ(105,"button",45),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCancel()}),t._uU(106," Cancel "),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(4),t.Q6J("ngIf",e.loading),t.xp6(10),t.Q6J("ngClass",t.VKq(36,E,(e.submitted||e.f.station.touched)&&e.f.station.invalid)),t.xp6(1),t.Q6J("ngIf",e.station),t.xp6(1),t.Q6J("ngIf",!e.station),t.xp6(1),t.Q6J("ngIf",e.f.station.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(38,E,(e.submitted||e.f.element.touched)&&e.f.element.invalid)),t.xp6(1),t.Q6J("ngIf",e.element),t.xp6(1),t.Q6J("ngIf",!e.element),t.xp6(1),t.Q6J("ngIf",e.f.element.errors),t.xp6(8),t.Q6J("bsConfig",e.bsConfig)("bsValue",e.monthYearValue)("ngClass",t.VKq(40,E,e.submitted&&e.f.monthYear.invalid)),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.f.monthYear.invalid),t.xp6(5),t.Q6J("ngClass",t.VKq(42,E,(e.submitted||e.f.dayHour.touched)&&e.f.dayHour.invalid)),t.xp6(3),t.Q6J("ngForOf",e.hoursList),t.xp6(1),t.Q6J("ngIf",e.f.dayHour.errors),t.xp6(9),t.Q6J("ngClass",t.VKq(44,E,(e.submitted||e.f.temperature.touched)&&e.f.temperature.invalid)),t.xp6(3),t.Q6J("ngForOf",e.unitOptions.temperature),t.xp6(1),t.Q6J("ngIf",e.f.temperature.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(46,E,(e.submitted||e.f.precip.touched)&&e.f.precip.invalid)),t.xp6(3),t.Q6J("ngForOf",e.unitOptions.precipitation),t.xp6(1),t.Q6J("ngIf",e.f.precip.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(48,E,(e.submitted||e.f.cloud_height.touched)&&e.f.cloud_height.invalid)),t.xp6(3),t.Q6J("ngForOf",e.unitOptions.cloudHeight),t.xp6(1),t.Q6J("ngIf",e.f.cloud_height.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(50,E,(e.submitted||e.f.visibility.touched)&&e.f.visibility.invalid)),t.xp6(3),t.Q6J("ngForOf",e.unitOptions.visibility),t.xp6(1),t.Q6J("ngIf",e.f.visibility.errors),t.xp6(4),t.Q6J("ngIf",e.year&&e.month),t.xp6(1),t.Q6J("ngIf",e.error),t.xp6(1),t.Q6J("ngIf",e.element&&e.formDaysGroups.length),t.xp6(1),t.Q6J("ngIf",e.formDaysGroups.length),t.xp6(6),t.Q6J("ngClass",t.WLB(52,Oo,e.f.total.value===e.calcTotal,e.f.total.value!==e.calcTotal)),t.xp6(5),t.Q6J("ngIf",e.loading),t.xp6(1),t.hij(" ",e.hasRecord?"Update":"Save"," ")}}let So=(()=>{class o{constructor(e,n,i,a,u,x){this.router=e,this.modalService=n,this.responsiveSvc=i,this.dataEntryService=a,this.stationService=u,this.elementService=x,this.submitted=!1,this.loading=!0,this.error="",this.monthModified=!1,this.monthYearValue=new Date,this.bsConfig={isAnimated:!0,containerClass:"theme-blue",dateInputFormat:"MM/YYYY"},this.hour=6,this.unitOptions=Ee,this.hoursList=[24,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],this.hasRecord=!1,this.day=0}ngOnInit(){this.initForm(),this.dataEntryService.dailyState.pipe((0,p.b)(e=>this.loading=!!e),(0,g.h)(e=>!!e),(0,qe.q)(1)).subscribe(e=>{console.log(e),this.setFormState(+e.station,+e.element,e.monthYear,e.hour)})}canExit(){return!this.hasChanges||window.confirm("You have unsaved changes. Are you sure you want to leave the page?")}get f(){return this.form.controls}get isEditable(){return!!this.station&&!!this.element}get isModified(){return this.monthModified}get hasChanges(){return this.dailyGroup.toArray().filter(e=>!0===e.isDirty).length>0}get invalidEntries(){return this.dailyGroup.toArray().filter(e=>!!e.isInvalid).length>0}onFormModified(e){this.monthModified=e}resetStation(){this.station=void 0,this.form.controls.station.reset()}onStationSelect(e){this.station=e,this.form.controls.station.setValue(e.station_id),this.loadDailyData()}resetElement(){this.element=void 0,this.form.controls.element.reset()}onElementSelect(e){this.element=e,this.form.controls.element.setValue(e.element_id),this.loadDailyData()}onSubmit(e){if(this.submitted=!0,!this.form.invalid||this.f.days.invalid){if(this.invalidEntries)return void(this.error="The monthly data contains some invalid entried, please fix the items and try again.");if(console.log(+this.f.total.value,this.calcTotal,+this.f.total.value===this.calcTotal),+this.f.total.value!==this.calcTotal)return void(this.error="The days based data total does not match with the total provided, please check the values and try again.");this.error="",this.hasRecord?this.updateRecord():this.addRecord()}}onDateSelection(e){e&&this.renderFormDays(e)}getHoursValue(e){return b().set("hours",e).startOf("hour").format("HH:mm")}onReset(){this.modalService.show(m.S,{initialState:{title:"Confirm Reset",message:"You have changes in the form below, are you sure you want to reset?",confirm:"Go Ahead",cancel:"Cancel"}}).content.onClose.subscribe(i=>{i&&(this.form.reset(),this.station=void 0,this.element=void 0,this.dataEntryService.resetDailyState(),this.initForm())})}onCancel(){this.router.navigateByUrl("/")}onReturn(e){e.preventDefault()}onOpenCalendar(e){e.monthSelectHandler=n=>{e._store.dispatch(e._actions.select(n.date))},e.setViewMode("month")}onHourSelect(e){this.hour=this.f.dayHour.value,this.loadDailyData()}getDateText(e,n){return`${["January","February","March","April","May","June","July","August","September","October","November","December"][n-1]} ${e}`}moreInfo(){console.log("more info")}get daysArray(){return this.form.get("days")}get formDaysGroups(){return this.daysArray.controls}get calcTotal(){return this.dailyGroup?this.dailyGroup.toArray().reduce((e,n)=>(n.group.value.value?+n.group.value.value:0)+e,0):0}dayFocus(e){this.day=e}dayBlur(e){}handleReturn(e){+e<this.dailyGroup.toArray().length&&this.dailyGroup.toArray()[+e].focusValue()}revertDay(e){this.modalService.show(m.S,{initialState:{title:"Confirm Revert",message:"Are you sure you want to revert to original values?",confirm:"Go Ahead",cancel:"Cancel"}}).content.onClose.subscribe(a=>{if(a)if(this.hasRecord){const u=(e<10?"0":"")+e;this.formDaysGroups[e-1]=this.getDayGroup(e,this.raw[`day${u}`],this.raw[`flag${u}`],this.raw[`period${u}`])}else this.formDaysGroups[e-1]=this.getDayGroup(e)})}resetDays(){this.form.controls.days=new r.Oe([])}getDayGroup(e,n,i,a){return new r.cw({day:new r.NI(e),value:new r.NI(n,[r.kI.min(0),r.kI.max(70)]),flag:new r.NI(i||""),period:new r.NI(a)})}renderFormDays(e,n=!0){const i=b(e);this.year=i.year(),this.month=i.month()+1;const a=b(`${this.year}-${this.month}`,"YYYY-MM").daysInMonth();this.resetDays();for(let u=1;u<=a;u++)this.daysArray.push(this.getDayGroup(u));n&&this.loadDailyData()}initForm(){this.form=new r.cw({station:new r.NI(null,r.kI.required),element:new r.NI(null,r.kI.required),element_seq:new r.NI(!1),monthYear:new r.NI(new Date,r.kI.required),dayHour:new r.NI(6,[r.kI.min(0),r.kI.max(24)]),temperature:new r.NI(null),precip:new r.NI(null),cloud_height:new r.NI(null),visibility:new r.NI(null),days:new r.Oe([]),total:new r.NI(null)})}setFormState(e,n,i,a){this.stationService.getStation(e).pipe((0,p.b)(u=>{this.station=u.result[0]}),(0,Oe.w)(u=>this.elementService.getElement(n))).subscribe(u=>{this.element=u.result[0],this.loadDailyData()}),this.f.station.setValue(e),this.f.element.setValue(n),this.f.monthYear.setValue(i),this.monthYearValue=new Date(i),this.f.dayHour.setValue(a)}loadDailyData(){this.station&&this.element&&this.year&&this.month&&this.hour&&(this.loading=!0,this.dataEntryService.getDailyEntry(this.station.station_id,this.element.element_id,this.year,this.month,this.hour).subscribe(e=>{console.log(e),this.hasRecord=e.result.length>0,e.result.length?(this.raw=e.result[0],this.patchForm(e.result[0])):(this.resetDays(),this.renderFormDays(new Date(`${this.month}-1-${this.year}`),!1)),this.dailyGroup.toArray()[0].focusValue(),this.loading=!1}))}patchForm(e){this.f.temperature.setValue(e.temperature_units||""),this.f.precip.setValue(e.precip_units||""),this.f.cloud_height.setValue(e.cloud_height_units||""),this.f.visibility.setValue(e.vis_units||"");let n=0;this.formDaysGroups.forEach((i,a)=>{const u=a+1<10?`0${a+1}`:a+1;i.patchValue(Object.assign({},{day:a+1,value:e[`day${u}`],flag:e[`flag${u}`]||"",period:e[`period${u}`]})),n+=+e[`day${u}`]}),this.f.total.setValue(n||0)}addRecord(){var e,n;let i={station_id:null===(e=this.station)||void 0===e?void 0:e.station_id,element_id:null===(n=this.element)||void 0===n?void 0:n.element_id,yyyy:this.year,mm:this.month,hh:this.hour,temperature:this.form.value.temperature,precip_units:this.form.value.precip,vis_units:this.form.value.visibility,cloud_height_units:this.form.value.cloud_height};this.hasChanges||alert("You must enter a few values"),this.formDaysGroups.forEach((a,u)=>{const x=u+1<10?`0${u+1}`:u+1;i[`day${x}`]=a.controls.value.value,i[`flag${x}`]=a.controls.flag.value,i[`period${x}`]=a.controls.period.value}),i.entry_datetime=(new Date).toISOString(),i.temperature_units=this.f.temperature.value,i.precip_units=this.f.precip.value,i.cloud_height_units=this.f.cloud_height.value,i.vis_units=this.f.visibility.value,this.dailyGroup.toArray().forEach(a=>{const u=a.group.value,x=`${u.day<10?"0":""}${u.day}`;i[`day${x}`]=+u.value,i[`flag${x}`]=u.flag,i[`period${x}`]=u.period}),this.dataEntryService.addDailyEntry(i).subscribe(a=>{console.log(a),this.form.markAsPristine()})}updateRecord(){var e,n,i,a;if(!this.hasChanges)return;let u={station_id:null===(e=this.station)||void 0===e?void 0:e.station_id,element_id:null===(n=this.element)||void 0===n?void 0:n.element_id,yyyy:this.year,mm:this.month,hh:this.hour,temperature_units:this.form.value.temperature,precip_units:this.form.value.precip,vis_units:this.form.value.visibility,cloud_height_units:this.form.value.cloud_height};this.dailyGroup.toArray().forEach(x=>{const P=x.group.value,R=`${P.day<10?"0":""}${P.day}`;u[`day${R}`]=+P.value,u[`flag${R}`]=P.flag,u[`period${R}`]=P.period}),this.dataEntryService.updateDailyEntry(null===(i=this.station)||void 0===i?void 0:i.station_id,null===(a=this.element)||void 0===a?void 0:a.element_id,this.year,this.month,this.hour,u).subscribe(x=>{this.form.markAsPristine()})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(y.F0),t.Y36(f.tT),t.Y36(v.k),t.Y36(U),t.Y36(Pe.v),t.Y36(Ne.d))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-form-daily2"]],viewQuery:function(e,n){if(1&e&&t.Gf(Ve,5),2&e){let i;t.iGM(i=t.CRH())&&(n.dailyGroup=i)}},decls:4,vars:2,consts:[["novalidate","",3,"formGroup","ngSubmit","keydown.enter",4,"ngIf"],["novalidate","",3,"formGroup","ngSubmit","keydown.enter"],["sm","12",1,"text-end"],["sm","12","class","text-end",4,"ngIf"],["sm","12"],[1,"form-group","p-3","mt-2"],["xs","12","md","6","xl","3"],[1,"mb-2"],["cLabel","","for","station"],["id","station","type","hidden","formControlName","station","aria-label","default input","cFormControl","",3,"ngClass"],["class","typeahead-selection theme form-group",4,"ngIf"],[3,"onSelection",4,"ngIf"],["col","12","class","invalid-feedback",4,"ngIf"],["cLabel","","for","element"],["id","element","type","hidden","formControlName","element","aria-label","default input","cFormControl","",3,"ngClass"],[1,"mb-3"],["cInputGroupText","","id","basic-addon1"],["cIcon","","name","cilCalendar"],["id","element","type","hidden","formControlName","monthYear","aria-label","default input","cFormControl","","placeholder","Station Name"],["name","monthYear","placeholder","Select Year & Month","cFormControl","","bsDatepicker","","autocomplete","off",3,"bsConfig","bsValue","ngClass","bsValueChange","onShown"],["sm","12","class","invalid-feedback",4,"ngIf"],["cLabel","","for","hoursValue"],["formControlName","dayHour","aria-label","Hour","cSelect","",3,"ngClass","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","p-3","my-4"],["xs","12","md","6","lg","3"],["formControlName","temperature","aria-label","Temperature","cSelect","",3,"ngClass"],["cLabel","","for","precip"],["formControlName","precip","aria-label","Precipitation","cSelect","",3,"ngClass"],["cLabel","","for","cloudh"],["formControlName","cloud_height","aria-label","Hour","cSelect","",3,"ngClass"],["cLabel","","for","visibility"],["formControlName","visibility","aria-label","Hour","cSelect","",3,"ngClass"],[4,"ngIf"],["formArrayName","days",4,"ngIf"],[1,"mt-3"],["sm","12","md","6","lg","4","xl","3"],["cLabel","","for","total"],["type","number","formControlName","total","aria-label","total","placeholder","Total","cFormControl","",1,"txt-total",3,"ngClass"],[1,"my-4"],["xs","12 py-4"],["type","submit","cButton","","color","dark",1,"px-3"],["aria-hidden","true","size","sm",4,"ngIf"],["type","button","cButton","","color","dark",1,"px-3","mx-1",3,"click"],["type","button","cButton","","color","dark",1,"px-3",3,"click"],[1,"typeahead-selection","theme","form-group"],[1,"typeahead-selection-inner"],[1,"btn",3,"click"],["cIcon","","name","cilX"],[3,"onSelection"],["col","12",1,"invalid-feedback"],["cIcon","","name","cilXCircle"],["sm","12",1,"invalid-feedback"],[3,"value"],["md","12"],["color","danger"],["md","12 mt-3 mb-3"],[1,"form-info"],["src","./assets/img/icons/info.png","alt",""],["color","link","cButton","",1,"p-0",3,"click"],["type","button","color","link","cButton","",3,"click"],["formArrayName","days"],[1,"daily-header"],[1,"py-1"],["sm","12","md","6","lg","4","xl","3",1,"d-none","d-md-block"],["lg","4","xl","3",1,"d-none","d-lg-block"],["xl","3",1,"d-none","d-xl-block"],["md","12",4,"ngFor","ngForOf"],[3,"disabled","modified","group","onReturn","onFocus","onBlur","onDirty","onRevert"],["dailyGroup",""],["aria-hidden","true","size","sm"]],template:function(e,n){1&e&&(t.TgZ(0,"h5"),t._uU(1),t.qZA(),t._UZ(2,"hr"),t.YNc(3,Do,107,55,"form",0)),2&e&&(t.xp6(1),t.hij(" Daily data for the whole month ",n.monthModified," "),t.xp6(2),t.Q6J("ngIf",n.form))},directives:[s.O5,r._Y,r.JL,r.sg,c.iok,c.Yp0,$,c.eFW,r.Fj,c.oHf,r.JJ,r.u,s.mk,c.g8K,c.jOm,Q.ar,I.Y5,I.Np,r.EJ,c.nqR,r.YN,r.Kr,s.sg,r.wV,c.Hq3,ke.$,L.n,K.Y,c.wxo,r.CE,Ge,c.ORR],pipes:[s.JJ,s.OU],styles:[".daily-header[_ngcontent-%COMP%]   c-col[_ngcontent-%COMP%]{text-align:center;font-size:.65rem;padding-left:.3rem}.daily-header[_ngcontent-%COMP%]   c-col[_ngcontent-%COMP%]:first-child{padding-left:8%}.form-info[_ngcontent-%COMP%]{position:relative;padding:1rem .8rem .2rem 5rem;background-color:#d6ebff;border:1px solid #c2e0ff;border-radius:.25rem;color:#333}.form-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:1rem;left:.8rem;width:4rem}.form-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.1rem}.form-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;margin-top:.5rem}.txt-total[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:bold}.txt-total.is-valid[_ngcontent-%COMP%]{background-color:#d3eebc;color:#0c971e}.txt-total.is-invalid[_ngcontent-%COMP%]{background-color:#f0cdcd;color:#ff2f2f}"]}),o})();var Y=_(7777);const Uo=[{path:"",component:A,children:[{path:"hourly",component:we,canDeactivate:[Y.C],data:{title:"Hourly Data"}},{path:"",redirectTo:"daily",data:{title:"Data Entry"}},{path:"monthly",component:Qt,canDeactivate:[Y.C],data:{title:"Monthly Data"}},{path:"hourly-wind",component:ie,canDeactivate:[Y.C],data:{title:"Hourly Wind Data"}},{path:"daily",component:So,canDeactivate:[Y.C],data:{title:"Daily Data for Whole Month"}},{path:"synoptic",component:Ct,canDeactivate:[Y.C],data:{title:"Caribbean Synoptic Data"}},{path:"agro",component:O,canDeactivate:[Y.C],data:{title:"Kenya Agromet Data"}}]}];let Io=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[y.Bz.forChild(Uo)],y.Bz]}),o})(),Eo=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[s.ez,Io,d.m]]}),o})()},74:(N,w,_)=>{_.d(w,{d:()=>D});var s=_(4499),d=_(2835),y=_(7384),t=_(3668),c=_(453);const C="climsoft/v1/obselements";let D=(()=>{class A{constructor(m){this.http=m,this.state$=new s.X({elements:[],limit:10,page:1,pages:1}),this.init=!1;const p=this.state$.getValue();this.getElements(p.page,p.limit)}get elements(){return this.state$.asObservable()}adapt(m){const p={element_id:"Element ID",abbreviation:"Abbreviation",element_name:"Element Name",description:"Description",element_scale:"Element Scale",upper_limit:"Upper Limit",lower_limit:"Lower Limit",units:"Units",element_type:"Element Type",qc_total_required:"QC Total Required",selected:"Selected"};let g=[];return Object.keys(m).filter(h=>"elementId"!==h).forEach(h=>{g.push({key:p[h],value:m[h]||"No Value"})}),g}updateState(m){if(m.page){const p=this.state$.getValue().limit;this.getElements(m.page,p)}m.limit&&this.getElements(1,m.limit)}getElements(m,p){this.http.GET(`${C}?limit=${p}&offset=${(m-1)*p}`).subscribe(h=>{console.log(h),this.state$.next({elements:h.result,limit:p,page:h.page,pages:h.pages}),this.init=!0})}searchElements(m){return this.http.GET(`climsoft/v1/obselements/search?query=${m}`)}getElement(m){return this.http.GET(`${C}/${m}`)}addElement(m){return this.http.POST(`${C}`,Object.assign({},m)).pipe((0,d.K)(p=>{throw new Error(p.error.message)}),(0,y.b)(p=>{console.log(p);const g=this.state$.getValue(),{page:h,limit:r}=g;this.getElements(h,r)}))}updateElement(m,p){return this.http.PUT(`${C}/${m}`,p).pipe((0,d.K)(g=>{throw new Error(g.error.message)}),(0,y.b)(g=>{const h=this.state$.getValue(),{page:r,limit:b}=h;this.getElements(r,b)}))}removeElement(m){this.http.DELETE(`${C}/${m}`).pipe((0,d.K)(p=>{throw new Error(p.error.message)})).subscribe(p=>{const g=this.state$.getValue(),{page:h,limit:r}=g;this.getElements(h,r)})}}return A.\u0275fac=function(m){return new(m||A)(t.LFG(c.O))},A.\u0275prov=t.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})()},9935:(N,w,_)=>{_.d(w,{v:()=>D});var s=_(4499),d=_(2835),y=_(7384),t=_(3668),c=_(453);const C="climsoft/v1";let D=(()=>{class A{constructor(m){this.http=m,this.stations$=new s.X({stations:[],limit:10,page:1,pages:1}),this.init=!1;const p=this.stations$.getValue();this.getStations(p.page,p.limit)}get stations(){return this.stations$.asObservable()}adapt(m){const p={station_name:"Station Name",wmoid:"WMO ID",icaoid:"ICAO ID",latitude:"Latitude",longitude:"Longitude",elevation:"Elevation",qualifier:"Qualifier",geolocation_method:"Geo Location Method",geolocation_accuracy:"Geo Location Accurary",opening_datetime:"Opening",closing_datetime:"Closing",country:"Country",authority:"Authority",admin_region:"Admin Region",drainage_basin:"Drainage",waca_selection:"WACA Selection",cpt_selection:"SCP SELECTION",station_operational:"Station Operational"};let g=[];return Object.keys(m).filter(h=>-1===["station_id","station_name"].indexOf(h)).forEach(h=>{const r={};switch(r.key=p[h],r.value=m[h]||"No Value",h){case"opening_datetime":case"closing_datetime":case"closing_datetime":r.type="date";break;default:r.type=null}g.push(r)}),g}updateState(m){if(m.page){const p=this.stations$.getValue().limit;this.getStations(m.page,p)}m.limit&&this.getStations(1,m.limit)}getStations(m,p){console.log(m,p),this.http.GET(`${C}/stations?limit=${p}&offset=${(m-1)*p}`).subscribe(h=>{console.log(h),this.stations$.next({stations:h.result,limit:p,page:h.page,pages:h.pages}),this.init=!0})}getStation(m){return this.http.GET(`${C}/stations/${m}`)}searchStation(m){return this.http.GET(`${C}/stations/search?query=${m}`)}addStation(m){return this.http.POST(`${C}/stations`,Object.assign(Object.assign({},m),{station_id:"2343403"})).pipe((0,d.K)(g=>{throw new Error(g.error.message)}),(0,y.b)(g=>{console.log(g);const h=this.stations$.getValue(),{page:r,limit:b}=h;this.getStations(r,b)}))}updateStation(m,p){return this.http.PUT(`${C}/stations/${m}`,p).pipe((0,d.K)(g=>{throw new Error(g.error.message)}),(0,y.b)(g=>{const h=this.stations$.getValue(),{page:r,limit:b}=h;this.getStations(r,b)}))}removeStation(m){this.http.DELETE(`${C}/stations/${m}`).pipe((0,d.K)(p=>{throw new Error(p.error.message)})).subscribe(p=>{const g=this.stations$.getValue(),{page:h,limit:r}=g;this.getStations(h,r)})}getStationElements(m){return this.http.GET(`${C}/stations/${m}/station-elements`)}addStationElement(m){return this.http.POST(`${C}/station-elements`,m)}updateStationElement(m,p){return this.http.PUT(`${C}/station-elements/${m.recorded_from}/${m.described_by}/${m.recoded_with}/${m.begin_date}`,p)}getStationLocHistory(m){return this.http.GET(`${C}/station-location-histories?belongs_to=${m}`)}addStationLocHistory(m){return this.http.POST(`${C}/station-location-histories`,m)}updateStationLocHistory(m,p,g){return this.http.PUT(`${C}/station-location-histories/${m}/${p}`,g)}getStationQualifiers(m){return this.http.GET(`${C}/station-qualifiers?belongs_to=${m}`)}}return A.\u0275fac=function(m){return new(m||A)(t.LFG(c.O))},A.\u0275prov=t.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})()},6566:(N,w,_)=>{_.d(w,{Y:()=>M});var s=_(7384),d=_(3668),y=_(8305),t=_(9463),c=_(3067),C=_(4753),D=_(6921),A=_(2997),O=_(74),m=_(9133),p=_(9097),g=_(6019);function h(F,q){1&F&&(d.TgZ(0,"div",3),d._UZ(1,"img",4),d._uU(2," searching..."),d.qZA())}function r(F,q){if(1&F&&(d.TgZ(0,"div",5),d._uU(1),d.qZA(),d.TgZ(2,"div",6),d._uU(3),d.qZA()),2&F){const f=q.item;d.xp6(1),d.AsE("",f.element_id," - ",f.abbreviation,""),d.xp6(2),d.hij(" ",f.element_name," ")}}const b=function(F){return{loading:F}};let M=(()=>{class F{constructor(f){this.elementService=f,this.onSelection=new d.vpe,this.typeaheadLoading=!1,this.typeaheadNoResults=!1,this.loading=!1,this.search="",this.errorMessage=""}ngOnInit(){this.elements$=new y.y(f=>{f.next(this.search)}).pipe((0,t.b)(400),(0,s.b)(()=>{this.loading=!0}),(0,c.w)(f=>(console.log(f),f?this.elementService.searchElements(f).pipe((0,s.b)(()=>{this.loading=!1}),(0,C.U)(v=>v.result||[]),(0,s.b)(()=>D.Z,v=>{this.errorMessage=v&&v.message||"search failed"})):(0,A.of)([]))))}changeTypeaheadLoading(f){this.typeaheadLoading=f}onSelect(f){this.selected=f.item,this.onSelection.emit(f.item)}}return F.\u0275fac=function(f){return new(f||F)(d.Y36(O.d))},F.\u0275cmp=d.Xpm({type:F,selectors:[["app-element-selection"]],outputs:{onSelection:"onSelection"},decls:4,vars:9,consts:[["typeaheadOptionField","element_name","autocomplete","off","autocorrect","off","placeholder","Described By",1,"form-control",3,"ngModel","typeahead","typeaheadAsync","typeaheadOptionsLimit","typeaheadItemTemplate","ngClass","ngModelChange","typeaheadLoading","typeaheadOnSelect"],["class","typeahead-loading",4,"ngIf"],["itemTemplate",""],[1,"typeahead-loading"],["src","./assets/img/gif/spinner.gif","alt",""],[1,"item-heading"],[1,"item-title"]],template:function(f,v){if(1&f&&(d.TgZ(0,"input",0),d.NdJ("ngModelChange",function(T){return v.search=T})("typeaheadLoading",function(T){return v.changeTypeaheadLoading(T)})("typeaheadOnSelect",function(T){return v.onSelect(T)}),d.qZA(),d.YNc(1,h,3,0,"div",1),d.YNc(2,r,4,3,"ng-template",null,2,d.W1O)),2&f){const Z=d.MAs(3);d.Q6J("ngModel",v.search)("typeahead",v.elements$)("typeaheadAsync",!0)("typeaheadOptionsLimit",7)("typeaheadItemTemplate",Z)("ngClass",d.VKq(7,b,v.typeaheadLoading)),d.xp6(1),d.Q6J("ngIf",v.loading)}},directives:[m.Fj,m.JJ,m.On,p.Bp,g.mk,g.O5],styles:[".item-heading[_ngcontent-%COMP%]{font-size:.7rem}.item-title[_ngcontent-%COMP%]{font-size:.9rem}"]}),F})()},4379:(N,w,_)=>{_.d(w,{$:()=>d});var s=_(3668);let d=(()=>{class y{constructor(){}ngOnInit(){}}return y.\u0275fac=function(c){return new(c||y)},y.\u0275cmp=s.Xpm({type:y,selectors:[["app-infinite-loading"]],decls:2,vars:0,consts:[[1,"infinite-loader"],[1,"loader-bar"]],template:function(c,C){1&c&&(s.TgZ(0,"div",0),s._UZ(1,"div",1),s.qZA())},styles:['.infinite-loader[_ngcontent-%COMP%]{width:100%;margin:0 auto;border-radius:10px;border:4px solid transparent;position:relative;padding:1px}.infinite-loader[_ngcontent-%COMP%]:before{content:"";border:1px solid #1697ec;border-radius:10px;position:absolute;top:-4px;right:-4px;bottom:-4px;left:-4px}.infinite-loader[_ngcontent-%COMP%]   .loader-bar[_ngcontent-%COMP%]{position:absolute;border-radius:10px;top:0;right:100%;bottom:0;left:0;background:#1697ec;width:0;animation:borealisBar 1s linear infinite}@keyframes borealisBar{0%{left:0%;right:100%;width:0%}10%{left:0%;right:75%;width:25%}90%{right:0%;left:75%;width:25%}to{left:100%;right:0%;width:0%}}']}),y})()},5154:(N,w,_)=>{_.d(w,{n:()=>q});var s=_(3668),d=_(8305),y=_(9463),t=_(7384),c=_(3067),C=_(4753),D=_(6921),A=_(2835),O=_(2997),m=_(9935),p=_(9133),g=_(9097),h=_(6019);function r(f,v){1&f&&(s.TgZ(0,"div",4),s._UZ(1,"img",5),s._uU(2," searching..."),s.qZA())}function b(f,v){if(1&f&&(s.TgZ(0,"div",6),s.TgZ(1,"div",7),s._uU(2),s.qZA(),s.qZA()),2&f){const Z=s.oxw();s.xp6(2),s.Oqu(Z.errorMessage)}}function M(f,v){if(1&f&&(s.TgZ(0,"div",8),s._uU(1),s.qZA(),s.TgZ(2,"div",9),s._uU(3),s.qZA()),2&f){const Z=v.item;s.xp6(1),s.AsE("",Z.station_id," - ",Z.station_name,""),s.xp6(2),s.hij(" ",Z.element_name," ")}}const F=function(f){return{loading:f}};let q=(()=>{class f{constructor(Z){this.stationService=Z,this.placeholder="Station",this.onSelection=new s.vpe,this.typeaheadLoading=!1,this.typeaheadNoResults=!1,this.loading=!1,this.search="",this.errorMessage=""}ngOnInit(){this.stations$=new d.y(Z=>{Z.next(this.search)}).pipe((0,y.b)(400),(0,t.b)(()=>{this.errorMessage="",this.loading=!0}),(0,c.w)(Z=>Z?this.stationService.searchStation(Z).pipe((0,t.b)(()=>{this.loading=!1}),(0,C.U)(T=>T.result||[]),(0,t.b)(()=>D.Z,T=>{this.loading=!1,this.errorMessage=T&&T.message||"station search failed"}),(0,A.K)(T=>(this.errorMessage="station search failed",(0,O.of)(T)))):(0,O.of)([])))}changeTypeaheadLoading(Z){this.typeaheadLoading=Z}onSelect(Z){this.selected=Z.item,this.onSelection.emit(Z.item)}}return f.\u0275fac=function(Z){return new(Z||f)(s.Y36(m.v))},f.\u0275cmp=s.Xpm({type:f,selectors:[["app-station-selection"]],inputs:{placeholder:"placeholder"},outputs:{onSelection:"onSelection"},decls:5,vars:11,consts:[["typeaheadOptionField","station_name","autocomplete","off","autocorrect","off",1,"form-control",3,"ngModel","typeahead","typeaheadAsync","typeaheadOptionsLimit","typeaheadItemTemplate","ngClass","placeholder","ngModelChange","typeaheadLoading","typeaheadOnSelect"],["class","typeahead-loading",4,"ngIf"],["ngClass","typeahead-error","class","typeahead-loading",4,"ngIf"],["itemTemplate",""],[1,"typeahead-loading"],["src","./assets/img/gif/spinner.gif","alt",""],["ngClass","typeahead-error",1,"typeahead-loading"],[1,"typeahead-error-inner"],[1,"item-heading"],[1,"item-title"]],template:function(Z,T){if(1&Z&&(s.TgZ(0,"input",0),s.NdJ("ngModelChange",function(U){return T.search=U})("typeaheadLoading",function(U){return T.changeTypeaheadLoading(U)})("typeaheadOnSelect",function(U){return T.onSelect(U)}),s.qZA(),s.YNc(1,r,3,0,"div",1),s.YNc(2,b,3,1,"div",2),s.YNc(3,M,4,3,"ng-template",null,3,s.W1O)),2&Z){const S=s.MAs(4);s.Q6J("ngModel",T.search)("typeahead",T.stations$)("typeaheadAsync",!0)("typeaheadOptionsLimit",7)("typeaheadItemTemplate",S)("ngClass",s.VKq(9,F,T.typeaheadLoading))("placeholder",T.placeholder),s.xp6(1),s.Q6J("ngIf",T.loading),s.xp6(1),s.Q6J("ngIf",!T.loading&&T.errorMessage)}},directives:[p.Fj,p.JJ,p.On,g.Bp,h.mk,h.O5],styles:[".typeahead-loading[_ngcontent-%COMP%]{padding:.3rem .6rem;font-size:.9rem}.typeahead-loading[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px;margin-right:.2rem}typeahead-container[_ngcontent-%COMP%]   .dropdown-item.active[_ngcontent-%COMP%]{background-color:#277bc9!important}.item-heading[_ngcontent-%COMP%]{font-size:.7rem}.item-title[_ngcontent-%COMP%]{font-size:.9rem}.typeahead-error[_ngcontent-%COMP%]{margin-top:.2rem;padding:0 .3rem}.typeahead-error-inner[_ngcontent-%COMP%]{padding:.1rem .3rem;font-size:.9rem;background-color:#ffd9d9;border:1px solid #c7a9a9;border-radius:.2rem;color:#d11a1a}"]}),f})()}}]);